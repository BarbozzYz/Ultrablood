--[[
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë  PANEL Ultra Blood - VERS√ÉO CORRIGIDA   ‚ïë
    ‚ïë  + Hitbox/ESP ao morrer/respawnar       ‚ïë
    ‚ïë  + SHIFT+Z funciona sempre              ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera
local Mouse = LocalPlayer:GetMouse()

--[[
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë     ULTRA BLOOD - GAME LOGS SYSTEM COMPLETO             ‚ïë
    ‚ïë  Cole este c√≥digo ANTES da fun√ß√£o CreateUI()            ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
]]

-- ‚úÖ ADICIONAR NO IN√çCIO (depois das services)
local StarterGui = game:GetService("StarterGui")
local MarketplaceService = game:GetService("MarketplaceService")

-- ‚úÖ GAME DETECTION SYSTEM
local GameDetection = {
    CurrentGame = "Unknown",
    GameID = game.PlaceId,
    GameName = "",
    Supported = false,
    Features = {},
    ExplorerTree = {}
}

-- Detecta nome do jogo
pcall(function()
    GameDetection.GameName = MarketplaceService:GetProductInfo(GameDetection.GameID).Name
end)

-- ‚úÖ DATABASE DE JOGOS SUPORTADOS
local SupportedGames = {
    [155615604] = { -- Prison Life
        Name = "Prison Life",
        Color = {
            Start = Color3.fromRGB(255, 255, 255),  -- Branco
            Middle = Color3.fromRGB(200, 100, 255), -- Roxo
            End = Color3.fromRGB(255, 100, 200)     -- Rosa
        },
        Features = {
            Dash = true,
            NoRecoil = true,
            AutoCharge = true,
            NoCooldownRecharge = true,
            ESPTeams = true,
            Speed = true,
            NoShiftToSprint = true,
            AimbotSticky = true,
            FOVVision = true,
            NoDoors = true,
            GodMode = true,
            CreateTeleport = true,
            Teleports = {
                {Name = "Criminal Base", Position = CFrame.new(-920, 95, 2138)},
                {Name = "Prison Armory", Position = CFrame.new(791, 100, 2377)},
                {Name = "AK-47", Position = CFrame.new(-939, 95, 2055)},
                {Name = "Remington", Position = CFrame.new(-937, 95, 2063)},
                {Name = "Tower", Position = CFrame.new(819, 131, 2588)},
                {Name = "Yard", Position = CFrame.new(791, 98, 2498)},
                {Name = "Cafeteria", Position = CFrame.new(920, 100, 2290)},
                {Name = "Cells", Position = CFrame.new(919, 100, 2441)}
            }
        }
    }
}



-- ‚úÖ VARI√ÅVEIS GLOBAIS
local CustomTeleports = {}
local PrisonLifeConnections = {}

-- ‚úÖ NOTIFICATION SYSTEM
local function SendNotification(title, text, duration)
    pcall(function()
        StarterGui:SetCore("SendNotification", {
            Title = title,
            Text = text,
            Duration = duration or 5,
            Icon = "rbxassetid://18793833129"
        })
    end)
end

-- ‚úÖ EXPLORER TREE BUILDER
local function BuildExplorerTree()
    local tree = {}
    
    local function AddNode(parent, obj, depth)
        if depth > 3 then return end -- Limita profundidade
        
        local node = {
            Name = obj.Name,
            ClassName = obj.ClassName,
            Children = {}
        }
        
        table.insert(parent, node)
        
        for _, child in pairs(obj:GetChildren()) do
            AddNode(node.Children, child, depth + 1)
        end
    end
    
    AddNode(tree, workspace, 0)
    AddNode(tree, game:GetService("ReplicatedStorage"), 0)
    
    return tree
end

-- ‚úÖ GAME DETECTION FUNCTION
local function DetectGame()
    SendNotification("Ultra Blood", "Executing...", 3)
    
    -- Detecta estrutura do jogo
    task.spawn(function()
        task.wait(1)
        GameDetection.ExplorerTree = BuildExplorerTree()
    end)
    
    task.wait(1.5)
    
    local gameData = SupportedGames[GameDetection.GameID]
    
    if gameData then
        GameDetection.CurrentGame = gameData.Name
        GameDetection.Supported = true
        GameDetection.Features = gameData.Features
        SendNotification("Ultra Blood", gameData.Name .. " injected!", 5)
        print("‚úÖ Game Detected: " .. gameData.Name)
    else
        GameDetection.CurrentGame = GameDetection.GameName
        GameDetection.Supported = false
        SendNotification("Ultra Blood", GameDetection.GameName .. " not injected logs for this game...", 5)
        print("‚ö†Ô∏è Unsupported Game: " .. GameDetection.GameName)
    end
end

-- ‚úÖ PRISON LIFE FUNCTIONS

-- DASH
local function PrisonLifeDash()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local hrp = LocalPlayer.Character.HumanoidRootPart
        local oc = {}
        for _, p in pairs(LocalPlayer.Character:GetDescendants()) do
            if p:IsA("BasePart") then
                oc[p] = p.CanCollide
                p.CanCollide = false
            end
        end
        hrp.CFrame = hrp.CFrame + (Camera.CFrame.LookVector * 20)
        task.wait(0.1)
        for p, c in pairs(oc) do
            if p and p.Parent then
                p.CanCollide = c
            end
        end
    end
end

-- NO RECOIL
local function TogglePrisonLifeNoRecoil(enabled)
    if PrisonLifeConnections.NoRecoil then
        PrisonLifeConnections.NoRecoil:Disconnect()
        PrisonLifeConnections.NoRecoil = nil
    end
    
    if enabled then
        PrisonLifeConnections.NoRecoil = RunService.Heartbeat:Connect(function()
            if Settings.GameLogs.PrisonLife.NoRecoil and LocalPlayer.Character then
                for _, tool in pairs(LocalPlayer.Character:GetChildren()) do
                    if tool:IsA("Tool") then
                        pcall(function()
                            for _, obj in pairs(tool:GetDescendants()) do
                                if obj:IsA("NumberValue") then
                                    local n = obj.Name:lower()
                                    if n:find("recoil") or n:find("spread") or n:find("kickback") then
                                        obj.Value = 0
                                    end
                                end
                            end
                        end)
                    end
                end
            end
        end)
    end
end

-- AUTO CHARGE
local function TogglePrisonLifeAutoCharge(enabled)
    if PrisonLifeConnections.AutoCharge then
        PrisonLifeConnections.AutoCharge:Disconnect()
        PrisonLifeConnections.AutoCharge = nil
    end
    
    if enabled then
        PrisonLifeConnections.AutoCharge = RunService.Heartbeat:Connect(function()
            if Settings.GameLogs.PrisonLife.AutoCharge and LocalPlayer.Character then
                local tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
                if tool then
                    pcall(function()
                        for _, obj in pairs(tool:GetDescendants()) do
                            if obj:IsA("IntValue") and obj.Name == "Ammo" then
                                obj.Value = 999
                            end
                        end
                    end)
                end
            end
        end)
    end
end

-- NO COOLDOWN RECHARGE
local function TogglePrisonLifeNoCooldown(enabled)
    Settings.GameLogs.PrisonLife.NoCooldownRecharge = enabled
    
    if enabled then
        for _, tool in pairs(LocalPlayer.Backpack:GetChildren()) do
            if tool:IsA("Tool") then
                pcall(function()
                    for _, obj in pairs(tool:GetDescendants()) do
                        if obj:IsA("NumberValue") and obj.Name:lower():find("cooldown") then
                            obj.Value = 0
                        end
                    end
                end)
            end
        end
    end
end

-- NO SHIFT TO SPRINT
local function TogglePrisonLifeNoShift(enabled)
    if PrisonLifeConnections.NoShift then
        PrisonLifeConnections.NoShift:Disconnect()
        PrisonLifeConnections.NoShift = nil
    end
    
    if enabled then
        Settings.GameLogs.PrisonLife.CustomSpeed = 26
        PrisonLifeConnections.NoShift = RunService.Heartbeat:Connect(function()
            if Settings.GameLogs.PrisonLife.NoShiftToSprint and LocalPlayer.Character then
                local hum = LocalPlayer.Character:FindFirstChild("Humanoid")
                if hum then
                    hum.WalkSpeed = 26
                end
            end
        end)
    end
end

-- AIMBOT STICKY (Mouse gruda sem mover c√¢mera)
local function TogglePrisonLifeAimbot(enabled)
    if PrisonLifeConnections.Aimbot then
        PrisonLifeConnections.Aimbot:Disconnect()
        PrisonLifeConnections.Aimbot = nil
    end
    
    if enabled then
        PrisonLifeConnections.Aimbot = RunService.RenderStepped:Connect(function()
            if Settings.GameLogs.PrisonLife.AimbotSticky then
                local closest = GetClosest()
                if closest and closest.Character and closest.Character:FindFirstChild("Head") then
                    local mousePos = UserInputService:GetMouseLocation()
                    local headPos = Camera:WorldToViewportPoint(closest.Character.Head.Position)
                    
                    if (Vector2.new(headPos.X, headPos.Y) - mousePos).Magnitude < Settings.Main.FOVSize then
                        pcall(function()
                            mousemoverel((headPos.X - mousePos.X) * 0.3, (headPos.Y - mousePos.Y) * 0.3)
                        end)
                    end
                end
            end
        end)
    end
end

-- NO DOORS
local function TogglePrisonLifeNoDoors(enabled)
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("BasePart") and obj.Name:lower():find("door") then
            pcall(function()
                if enabled then
                    obj.CanCollide = false
                    obj.Transparency = 0.7
                else
                    obj.CanCollide = true
                    obj.Transparency = 0
                end
            end)
        end
    end
end

-- GOD MODE
local function TogglePrisonLifeGodMode(enabled)
    if PrisonLifeConnections.GodMode then
        PrisonLifeConnections.GodMode:Disconnect()
        PrisonLifeConnections.GodMode = nil
    end
    
    if enabled then
        PrisonLifeConnections.GodMode = RunService.Heartbeat:Connect(function()
            if Settings.GameLogs.PrisonLife.GodMode and LocalPlayer.Character then
                local hum = LocalPlayer.Character:FindFirstChild("Humanoid")
                if hum and hum.Health < hum.MaxHealth then
                    hum.Health = hum.MaxHealth
                end
            end
        end)
    end
end

-- TELEPORT TO LOCATION
local function TeleportToPrisonLocation(cf)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = cf
    end
end

-- CREATE CUSTOM TELEPORT
local function CreateCustomTeleport()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local tpName = "Custom TP " .. (#CustomTeleports + 1)
        local pos = LocalPlayer.Character.HumanoidRootPart.CFrame
        CustomTeleports[tpName] = pos
        SendNotification("Ultra Blood", "Teleport criado: " .. tpName, 3)
        print("‚úÖ Teleport criado: " .. tpName .. " em " .. tostring(pos.Position))
    end
end

-- ‚úÖ EXPLORER VIEWER (UI simplificado)
local function CreateExplorerViewer(parent)
    local ExplorerFrame = Instance.new("ScrollingFrame")
    ExplorerFrame.Size = UDim2.new(1, -10, 0, 200)
    ExplorerFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
    ExplorerFrame.BorderSizePixel = 0
    ExplorerFrame.ScrollBarThickness = 4
    ExplorerFrame.Parent = parent
    Corner(ExplorerFrame, 8)
    
    local ExplorerLayout = Instance.new("UIListLayout")
    ExplorerLayout.Padding = UDim.new(0, 2)
    ExplorerLayout.Parent = ExplorerFrame
    
    local function AddTreeNode(nodeName, depth)
        local NodeBtn = Instance.new("TextButton")
        NodeBtn.Size = UDim2.new(1, -depth * 20, 0, 25)
        NodeBtn.Position = UDim2.new(0, depth * 20, 0, 0)
        NodeBtn.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
        NodeBtn.Text = "üìÅ " .. nodeName
        NodeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        NodeBtn.Font = Enum.Font.Code
        NodeBtn.TextSize = 12
        NodeBtn.TextXAlignment = Enum.TextXAlignment.Left
        NodeBtn.Parent = ExplorerFrame
        Corner(NodeBtn, 4)
    end
    
    -- Adiciona nodes principais
    AddTreeNode("Workspace", 0)
    AddTreeNode("ReplicatedStorage", 0)
    AddTreeNode("Players", 0)
    
    ExplorerFrame.CanvasSize = UDim2.new(0, 0, 0, ExplorerLayout.AbsoluteContentSize.Y)
    
    return ExplorerFrame
end

print("üéÆ Game Logs System carregado!")


local Settings = {
    Main = {
        AimbotHead=false,
        AimbotSafe=false,
        AimbotTarget="Head",
        FOV=false,
        FOVSize=150,
        HitboxEnabled=false,
        HitboxSize=10,
        HitboxShape="Box",
        HitboxPart="HumanoidRootPart",
        NoRecoil=false,
        InfMunition=false,
        ShootNearest=false,
        TPPlayers=false,
        TPDistance=5,
        -- NOVAS CONFIGS
        AimbotType="Ao Mirar",        -- "Ao Mirar" or "Toogle Key"
        AimbotKey=Enum.KeyCode.E,     -- Default toggle key
        AimbotMouseButton=nil,        -- Can be Enum.UserInputType.MouseButton1/2
        FollowPlayer=false,           -- Follow player acima
        FollowDistance=10, -- Height to follow
        SafeMS = 60,
    },
    ESP = {
        Enabled=false,
        Team=false,
        Chams=false,
        ChamsTeam=false,
        Name=false,        -- DESATIVADO por padr√£o (mudan√ßa solicitada)
        Box=false,         -- DESATIVADO por padr√£o (mudan√ßa solicitada)
        Line=false,        -- DESATIVADO por padr√£o (mudan√ßa solicitada)
        LinePlacement="Top",
        Health=false,
        Meters=false
    },
    Diver = {
        Speed=16,
        JumpPower=50,
        Fly=false,
        FlySpeed=50,
        Spin=false,
        SpinSpeed=10,
        Inclinado=false,
        NoClip=false,
        InfiniteJump=false,
        KillAura=false,
        KillAuraDistance=20,
        GodMode=false,
        HackerSkin=false,
        AutoDodge=false,
        WallTransparency=false,
        DodgeDistance=15,
        Vision10xEnabled=false, -- NOVO: ligado/desligado
        Vision10x = 100, -- Valor de FOV padr√£o para "mais afastado" (70 √© padr√£o da c√¢mera, 100 amplia vis√£o)
        FPSViewerEnabled = false,
        FPSRainbow = false,
        FPSFont = "GothamBold",
        FPSFrameColor = {R=45, G=45, B=50},
        FPSTransparency = 0.3
    },
    Config = {RemoveFog=false,FullBright=false},
    Colors = {
        FOV = {R=255,G=255,B=255,Chroma=true},
        Aimbot = {R=255,G=100,B=200,Chroma=true},
        ESP = {R=100,G=200,B=255,Chroma=true}, -- GARANTE Chroma ativo por padr√£o
        Panel = {R=200,G=50,B=200,Chroma=true},
        -- Ajuste de cor padr√£o da borda para tom roxo/rosa suave (por padr√£o)
        Border = {R=186, G=85, B=211, Chroma=false}
    },
    Keybinds = {}, -- Armazena keybinds para cada op√ß√£o
    Theme = "Dark"
}

-- ‚úÖ ADICIONAR NAS SETTINGS (dentro de Settings = {})
-- Cole isso DEPOIS de Diver = {...}
if not Settings.GameLogs then
    Settings.GameLogs = {
        PrisonLife = {
            Dash = false,
            NoRecoil = false,
            AutoCharge = false,
            NoCooldownRecharge = false,
            ESPTeams = false,
            CustomSpeed = 16,
            NoShiftToSprint = false,
            AimbotSticky = false,
            FOVVision = 70,
            NoDoors = false,
            GodMode = false
        }
    }
end

local ESPObjects,FOVCircle,DashKey,SafeToggle={},nil,Enum.KeyCode.Q,false
local Connections,OriginalSizes={},{}
local GUI,Sidebar,Content,MainFrame,TitleText = nil,nil,nil,nil,nil
local SidebarExpanded = false
local Gradients = {}
local BorderGradients = {}
local PanelVisible = true
local ChromaHue = 0
local CurrentTPTarget = nil
local OriginalFog = nil
local OriginalAmbient = nil
local OriginalBrightness = nil

-- NOVAS VARI√ÅVEIS GLOBAIS
local AimbotActive = false  -- Para modo Toogle Key
local CurrentFollowTarget = nil
local FollowPlayerCon = nil
local SafeTargetData = {}  -- Armazena dados de cada target
local LastMouseState = false  -- Para detectar cliques

-- Vision10x UI / estado
local VisionSliderFrame = nil
local OriginalFOV = nil
local Vision10xCon = nil
local FPSViewerFrame = nil
local FPSViewerText = nil
local FPSUpdateConnection = nil
local LastFrameTime = tick()
local FrameCounter = 0
local CurrentFPS = 0

local Dark = {BG=Color3.fromRGB(30,30,35),SEC=Color3.fromRGB(45,45,50),ACC=Color3.fromRGB(200,100,200),TXT=Color3.fromRGB(255,255,255),BRD=Color3.fromRGB(100,50,150)}
local Light = {BG=Color3.fromRGB(215,215,220),SEC=Color3.fromRGB(185,185,195),ACC=Color3.fromRGB(200,100,200),TXT=Color3.fromRGB(50,50,60),BRD=Color3.fromRGB(255,100,200)}
local C = Dark -- TEMA DARK PADR√ÉO

local function Tween(obj,props,dur) TweenService:Create(obj,TweenInfo.new(dur or 0.3,Enum.EasingStyle.Quint,Enum.EasingDirection.Out),props):Play() end
local function Corner(p,r) local c=Instance.new("UICorner") c.CornerRadius=UDim.new(0,r or 10) c.Parent=p return c end

-- Fun√ß√£o HSV para RGB (para efeito Chroma)
local function HSVtoRGB(h, s, v)
    local r, g, b
    local i = math.floor(h * 6)
    local f = h * 6 - i
    local p = v * (1 - s)
    local q = v * (1 - f * s)
    local t = v * (1 - (1 - f) * s)
    i = i % 6
    if i == 0 then r, g, b = v, t, p
    elseif i == 1 then r, g, b = q, v, p
    elseif i == 2 then r, g, b = p, v, t
    elseif i == 3 then r, g, b = p, q, v
    elseif i == 4 then r, g, b = t, p, v
    elseif i == 5 then r, g, b = v, p, q
    end
    return Color3.fromRGB(r * 255, g * 255, b * 255)
end

local function GetChromaColor()
    return HSVtoRGB(ChromaHue, 1, 1)
end
local function Stroke(p,col,t,animated)
    local s=Instance.new("UIStroke")
    s.Color=col or Color3.fromRGB(Settings.Colors.Border.R, Settings.Colors.Border.G, Settings.Colors.Border.B)
    s.Thickness=t or 1
    s.Parent=p
    
    if animated then
        local baseColor = Settings.Colors.Border
        -- cria um gradiente com centro mais claro (quase branco levemente rosado) para efeito pedido
        local dark = Color3.fromRGB(math.max(0, baseColor.R - 40),math.max(0, baseColor.G - 40),math.max(0, baseColor.B - 40))
        local lightCenter = Color3.fromRGB(
            math.min(255, baseColor.R + 60),
            math.min(255, baseColor.G + 60),
            math.min(255, baseColor.B + 60)
        )
        local g=Instance.new("UIGradient")
        g.Color=ColorSequence.new({
            ColorSequenceKeypoint.new(0, dark),
            ColorSequenceKeypoint.new(0.5, lightCenter),
            ColorSequenceKeypoint.new(1, dark)
        })
        g.Rotation=45
        g.Parent=s
        table.insert(BorderGradients, {Grad=g, Stroke=s})
    end
    
    return s
end

local function UpdateAllBorderGradients()
    for _, data in pairs(BorderGradients) do
        if data.Grad and data.Grad.Parent and data.Stroke and data.Stroke.Parent then
            local baseColor = Settings.Colors.Border
            local dark = Color3.fromRGB(math.max(0, baseColor.R - 40),math.max(0, baseColor.G - 40),math.max(0, baseColor.B - 40))
            local lightCenter = Color3.fromRGB(
                math.min(255, baseColor.R + 60),
                math.min(255, baseColor.G + 60),
                math.min(255, baseColor.B + 60)
            )
            data.Stroke.Color = Color3.fromRGB(baseColor.R, baseColor.G, baseColor.B)
            data.Grad.Color = ColorSequence.new({
                ColorSequenceKeypoint.new(0, dark),
                ColorSequenceKeypoint.new(0.5, lightCenter),
                ColorSequenceKeypoint.new(1, dark)
            })
        end
    end
end

local function Gradient(p, colorSettings)
    local g=Instance.new("UIGradient")
    local baseColor = colorSettings or Settings.Colors.Panel
    local dark = Color3.fromRGB(math.max(0, baseColor.R - 50),math.max(0, baseColor.G - 50),math.max(0, baseColor.B - 50))
    local light = Color3.fromRGB(math.min(255, baseColor.R + 50),math.min(255, baseColor.G + 50),math.min(255, baseColor.B + 50))
    g.Color=ColorSequence.new({ColorSequenceKeypoint.new(0, dark),ColorSequenceKeypoint.new(0.5, Color3.fromRGB(baseColor.R, baseColor.G, baseColor.B)),ColorSequenceKeypoint.new(1, light)})
    g.Rotation=45
    g.Parent=p
    table.insert(Gradients, {Grad=g, ColorSettings=colorSettings})
    return g
end

-- CRIA UMA BARRINHA DE VISION10x E RETORNA O FRAME (vis√≠vel/invis√≠vel conforme toggle)
local function CreateVisionSlider(parent)
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Size = UDim2.new(1, -20, 0, 45)
    sliderFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
    sliderFrame.Parent = parent
    Corner(sliderFrame, 6)
    
    local stroke = Instance.new("UIStroke")
    stroke.Thickness = 1.5
    stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
    stroke.Parent = sliderFrame
    
    local grad = Instance.new("UIGradient")
    grad.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(150, 50, 250)), -- Roxo
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(240, 240, 255)), -- Branco leve
        ColorSequenceKeypoint.new(1, Color3.fromRGB(150, 50, 250))
    })
    grad.Parent = stroke
    table.insert(BorderGradients, {Grad = grad, Stroke = stroke})

    local label = Instance.new("TextLabel")
    label.Text = "Vision 10x: " .. Settings.Diver.Vision10x
    label.Size = UDim2.new(1, 0, 0, 25)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 13
    label.Parent = sliderFrame

    local barBG = Instance.new("Frame")
    barBG.Size = UDim2.new(0.85, 0, 0, 6)
    barBG.Position = UDim2.new(0.075, 0, 0.75, -2)
    barBG.BackgroundColor3 = Color3.fromRGB(50, 50, 55)
    barBG.Parent = sliderFrame
    Corner(barBG, 3)

    local minFOV, maxFOV = 70, 140 -- range para o slider (70 = padr√£o camera, 140 = vis√£o bem ampla)
    -- calcula posi√ß√£o inicial com base no valor atual
    local initialPct = math.clamp((Settings.Diver.Vision10x - minFOV) / (maxFOV - minFOV), 0, 1)

    local barFill = Instance.new("Frame")
    barFill.Size = UDim2.new(initialPct, 0, 1, 0)
    barFill.BackgroundColor3 = Color3.fromRGB(200, 100, 255)
    barFill.Parent = barBG
    Corner(barFill, 3)

    local SBtn = Instance.new("TextButton")
    SBtn.Size = UDim2.new(0,18,0,18)
    SBtn.Position = UDim2.new(initialPct, -9, 0.5, -9)
    SBtn.BackgroundColor3 = Color3.fromRGB(255,255,255)
    SBtn.Text = ""
    SBtn.Parent = barBG
    Corner(SBtn, 9)

    local dragging = false
    local function UpdateFOVByPosition(mx)
        local pos = math.clamp((mx - barBG.AbsolutePosition.X) / barBG.AbsoluteSize.X, 0, 1)
        local newFOV = minFOV + (pos * (maxFOV - minFOV))
        Settings.Diver.Vision10x = math.floor(newFOV)
        barFill.Size = UDim2.new(pos, 0, 1, 0)
        SBtn.Position = UDim2.new(pos, -9, 0.5, -9)
        label.Text = "Vision 10x: " .. Settings.Diver.Vision10x
        -- aplica apenas se estiver habilitado
        if Settings.Diver.Vision10xEnabled and workspace.CurrentCamera then
            workspace.CurrentCamera.FieldOfView = Settings.Diver.Vision10x
        end
    end

    SBtn.MouseButton1Down:Connect(function()
        dragging = true
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
    end)
    RunService.RenderStepped:Connect(function()
        if dragging then
            local m = UserInputService:GetMouseLocation()
            UpdateFOVByPosition(m.X)
        end
    end)

    -- inicialmente invis√≠vel (controlado pelo toggle)
    sliderFrame.Visible = false

    return sliderFrame
end

local function UpdateAllGradients()
    for _, data in pairs(Gradients) do
        if data.Grad and data.Grad.Parent then
            local baseColor = data.ColorSettings or Settings.Colors.Panel
            local dark = Color3.fromRGB(math.max(0, baseColor.R - 50),math.max(0, baseColor.G - 50),math.max(0, baseColor.B - 50))
            local light = Color3.fromRGB(math.min(255, baseColor.R + 50),math.min(255, baseColor.G + 50),math.min(255, baseColor.B + 50))
            data.Grad.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, dark),ColorSequenceKeypoint.new(0.5, Color3.fromRGB(baseColor.R, baseColor.G, baseColor.B)),ColorSequenceKeypoint.new(1, light)})
        end
    end
    -- Atualiza cor base do t√≠tulo
    if TitleText then
        TitleText.TextColor3 = Color3.fromRGB(Settings.Colors.Panel.R, Settings.Colors.Panel.G, Settings.Colors.Panel.B)
    end
end

task.spawn(function() 
    while task.wait(0.03) do
        -- Atualiza Hue do Chroma (0 a 1)
        ChromaHue = (ChromaHue + 0.005) % 1
        local chromaCol = GetChromaColor()
        
        -- Rotaciona gradientes
        for _, data in pairs(Gradients) do 
            if data.Grad and data.Grad.Parent then 
                data.Grad.Rotation = (data.Grad.Rotation + 1) % 360 
            end 
        end
        for _, data in pairs(BorderGradients) do 
            if data.Grad and data.Grad.Parent then 
                data.Grad.Rotation = (data.Grad.Rotation + 2) % 360 
            end 
        end
        
        -- Atualiza cores Chroma
        if Settings.Colors.FOV.Chroma and FOVCircle then
            FOVCircle.Color = chromaCol
        end
        
        -- Atualiza ESP Chroma
        if Settings.Colors.ESP.Chroma then
            for player, objects in pairs(ESPObjects) do
                pcall(function()
                    if objects.N and objects.N.Label then
                        objects.N.Label.TextColor3 = chromaCol
                    end
                    if objects.M then
                        objects.M.TextColor3 = chromaCol
                    end
                    if objects.H then
                        objects.H.FillColor = chromaCol
                        objects.H.OutlineColor = chromaCol
                    end
                    if objects.Box then
                        objects.Box.Color = chromaCol
                    end
                    if objects.L then
                        objects.L.Color = chromaCol
                    end
                end)
            end
        end
    end 
end)

local function GetClosest()
    if not (Settings.Main.AimbotHead or Settings.Main.AimbotSafe or Settings.Main.ShootNearest) then return nil end
    local closest,dist = nil,Settings.Main.FOVSize
    for _,p in pairs(Players:GetPlayers()) do
        if p~=LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
            local part = p.Character:FindFirstChild(Settings.Main.AimbotTarget)
            if part then
                local pos,vis = Camera:WorldToViewportPoint(part.Position)
                if vis then
                    local d = (Vector2.new(pos.X,pos.Y) - UserInputService:GetMouseLocation()).Magnitude
                    if d<dist then closest,dist = p,d end
                end
            end
        end
    end
    return closest
end

-- SUBSTITUI√á√ÉO: UpdateAimbot com suporte a Toogle Key / Ao Mirar
local function UpdateAimbot()
    local shouldAim = false
    
    if Settings.Main.AimbotType == "Ao Mirar" then
        shouldAim = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2)
    elseif Settings.Main.AimbotType == "Toogle Key" then
        shouldAim = AimbotActive
    end
    
    if shouldAim then
        local target = GetClosest()
        
        if target and target.Character then
            -- Inicializa dados do target se n√£o existir
            if not SafeTargetData[target.UserId] then
                SafeTargetData[target.UserId] = {
                    ShotCount = 0,
                    LastTarget = target
                }
            end
            
            local targetData = SafeTargetData[target.UserId]
            
            -- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            -- AIMBOT SAFE: Mira no corpo primeiro
            -- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            if Settings.Main.AimbotSafe and Settings.Main.SafeMS then
                -- Calcula quantos tiros necess√°rios no corpo
                local requiredBodyShots = math.floor(Settings.Main.SafeMS / 60)
                
                -- Detecta quando atirou (mouse button 1 pressionado)
                local currentMouseState = UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton1)
                
                -- Se acabou de clicar (transi√ß√£o false -> true)
                if currentMouseState and not LastMouseState then
                    if targetData.ShotCount < requiredBodyShots then
                        targetData.ShotCount = targetData.ShotCount + 1
                        print("üéØ Aimbot Safe - Tiro " .. targetData.ShotCount .. "/" .. requiredBodyShots .. " no corpo")
                    end
                end
                
                LastMouseState = currentMouseState
                
                -- Decide onde mirar baseado na contagem
                if targetData.ShotCount < requiredBodyShots then
                    -- AINDA no corpo (HumanoidRootPart)
                    local hrp = target.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        Camera.CFrame = CFrame.new(Camera.CFrame.Position, hrp.Position)
                    end
                else
                    -- J√Å atirou todos os tiros no corpo -> CABE√áA
                    local head = target.Character:FindFirstChild("Head")
                    if head then
                        Camera.CFrame = CFrame.new(Camera.CFrame.Position, head.Position)
                    end
                end
            
            -- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            -- AIMBOT HEAD: Mira direto na cabe√ßa
            -- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
            elseif Settings.Main.AimbotHead then
                local part = target.Character:FindFirstChild(Settings.Main.AimbotTarget)
                if part then
                    Camera.CFrame = CFrame.new(Camera.CFrame.Position, part.Position)
                end
            end
        else
            -- Sem target -> limpa dados antigos
            SafeTargetData = {}
            LastMouseState = false
        end
    else
        -- N√£o est√° mirando -> reseta estado do mouse
        LastMouseState = false
    end
end

local function ShootNearest()
    if Settings.Main.ShootNearest and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
        if tool then
            local target = GetClosest()
            if target and target.Character and target.Character:FindFirstChild("Head") then
                -- Verifica se h√° obst√°culos entre voc√™ e o target
                local origin = LocalPlayer.Character.HumanoidRootPart.Position
                local targetPos = target.Character.Head.Position
                local direction = (targetPos - origin).Unit * (targetPos - origin).Magnitude
                
                local rayParams = RaycastParams.new()
                rayParams.FilterDescendantsInstances = {LocalPlayer.Character, target.Character}
                rayParams.FilterType = Enum.RaycastFilterType.Blacklist
                
                local rayResult = workspace:Raycast(origin, direction, rayParams)
                
                -- S√≥ atira se N√ÉO tiver obst√°culos
                if not rayResult then
                    -- Atira sem mover a c√¢mera (silent aim)
                    if tool:FindFirstChild("Fire") then 
                        tool.Fire:Fire() 
                    elseif tool:FindFirstChild("Shoot") then 
                        tool:Activate() 
                    else 
                        tool:Activate() 
                        pcall(function() mouse1click() end) 
                    end
                end
            end
        end
    end
end

pcall(function() FOVCircle = Drawing.new("Circle") FOVCircle.Thickness,FOVCircle.NumSides,FOVCircle.Radius = 1,50,Settings.Main.FOVSize FOVCircle.Filled,FOVCircle.Visible,FOVCircle.Transparency = false,false,1 FOVCircle.Color = Color3.new(Settings.Colors.FOV.R/255, Settings.Colors.FOV.G/255, Settings.Colors.FOV.B/255) end)

-- HITBOX CORRIGIDA - Aplica quando player respawna
local function ApplyHitboxToPlayer(player)
    if not player.Character then return end
    local part = player.Character:FindFirstChild(Settings.Main.HitboxPart)
    if not part then return end
    
    if Settings.Main.HitboxEnabled then
        if not OriginalSizes[part] then OriginalSizes[part] = part.Size end
        local sz = Settings.Main.HitboxSize
        part.Size = Vector3.new(sz,sz,sz)
        part.Transparency,part.Color,part.Material,part.CanCollide = 0.8,Color3.fromRGB(255,0,0),Enum.Material.Neon,false
        if Settings.Main.HitboxShape=="Circle" then
            if not part:FindFirstChild("Mesh") then local m = Instance.new("SpecialMesh") m.Name="Mesh" m.MeshType=Enum.MeshType.Sphere m.Parent=part end
        else
            if part:FindFirstChild("Mesh") then part.Mesh:Destroy() end
        end
    else
        if OriginalSizes[part] then part.Size = OriginalSizes[part] part.Transparency = 1 end
        if part:FindFirstChild("Mesh") then part.Mesh:Destroy() end
    end
end

local function ApplyHitbox()
    for _,p in pairs(Players:GetPlayers()) do
        if p~=LocalPlayer then
            ApplyHitboxToPlayer(p)
        end
    end
end

local function ApplyNoRecoil() if Settings.Main.NoRecoil then local function Fix(tool) for _,obj in pairs(tool:GetDescendants()) do if obj:IsA("NumberValue") then local n = obj.Name:lower() if n:find("recoil") or n:find("spread") or n:find("kickback") then obj.Value = 0 end end end end if LocalPlayer.Character then for _,t in pairs(LocalPlayer.Character:GetChildren()) do if t:IsA("Tool") then Fix(t) end end end if LocalPlayer.Backpack then for _,t in pairs(LocalPlayer.Backpack:GetChildren()) do if t:IsA("Tool") then Fix(t) end end end end end

local function ApplyInfAmmo() if Settings.Main.InfMunition then local function Fix(tool) for _,obj in pairs(tool:GetDescendants()) do if obj:IsA("NumberValue") or obj:IsA("IntValue") then local n = obj.Name:lower() if n:find("ammo") or n:find("munition") or n:find("magazine") then obj.Value = 999999 end end end end if LocalPlayer.Character then for _,t in pairs(LocalPlayer.Character:GetChildren()) do if t:IsA("Tool") then Fix(t) end end end end end

local function CreateESP(player)
    if player == LocalPlayer then return end
    if ESPObjects[player] then for _,obj in pairs(ESPObjects[player]) do if typeof(obj)=="Instance" then obj:Destroy() elseif typeof(obj)=="table" and obj.Remove then obj:Remove() end end ESPObjects[player]=nil end
    local function Update() pcall(function() if not player.Parent or not player.Character then if ESPObjects[player] then for _,obj in pairs(ESPObjects[player]) do if typeof(obj)=="Instance" then obj:Destroy() elseif typeof(obj)=="table" and obj.Remove then obj:Remove() end end ESPObjects[player]=nil end return end ESPObjects[player] = ESPObjects[player] or {} 
            -- Usa cor Chroma inicial se estiver ativo, caso contr√°rio usa a cor definida
            local espColor = (Settings.Colors.ESP.Chroma and GetChromaColor()) or Color3.fromRGB(Settings.Colors.ESP.R, Settings.Colors.ESP.G, Settings.Colors.ESP.B)

            if Settings.ESP.Enabled then 
                if not ESPObjects[player].H then 
                    local h = Instance.new("Highlight") 
                    h.Adornee=player.Character 
                    h.FillTransparency=0.5 
                    h.OutlineTransparency=0 
                    h.DepthMode=Enum.HighlightDepthMode.AlwaysOnTop 
                    h.Parent=player.Character 
                    ESPObjects[player].H = h 
                end 
                ESPObjects[player].H.FillColor = (Settings.ESP.Team and player.Team) and player.Team.TeamColor.Color or espColor
                ESPObjects[player].H.OutlineColor = ESPObjects[player].H.FillColor 
            else 
                if ESPObjects[player].H then ESPObjects[player].H:Destroy() ESPObjects[player].H=nil end 
            end 

            if Settings.ESP.Chams and player.Character then 
                if not ESPObjects[player].C then 
                    ESPObjects[player].C = {} 
                    for _,part in pairs(player.Character:GetDescendants()) do 
                        if part:IsA("BasePart") then 
                            local h = Instance.new("Highlight") 
                            h.Adornee=part 
                            h.FillTransparency=1 
                            h.OutlineTransparency=1 
                            h.DepthMode=Enum.HighlightDepthMode.AlwaysOnTop 
                            h.Parent=part 
                            part.LocalTransparencyModifier = 0 
                            table.insert(ESPObjects[player].C, h) 
                        end 
                    end 
                end 
                for _,part in pairs(player.Character:GetDescendants()) do if part:IsA("BasePart") then part.LocalTransparencyModifier=0 end end 
            else 
                if ESPObjects[player].C then for _,h in pairs(ESPObjects[player].C) do h:Destroy() end for _,part in pairs(player.Character:GetDescendants()) do if part:IsA("BasePart") then part.LocalTransparencyModifier=1 end end ESPObjects[player].C = nil end 
            end 

            if Settings.ESP.Name and player.Character:FindFirstChild("Head") then 
                if not ESPObjects[player].N then 
                    local b = Instance.new("BillboardGui") 
                    b.Adornee=player.Character.Head 
                    b.Size=UDim2.new(0,200,0,50) 
                    b.StudsOffset=Vector3.new(0,2,0) 
                    b.AlwaysOnTop=true 
                    b.Parent=player.Character.Head 
                    local l = Instance.new("TextLabel") 
                    l.Size=UDim2.new(1,0,1,0) 
                    l.BackgroundTransparency=1 
                    l.Text=player.DisplayName 
                    l.TextColor3=espColor 
                    l.Font=Enum.Font.GothamBold 
                    l.TextSize=16 
                    l.TextStrokeTransparency=0 
                    l.Parent=b 
                    ESPObjects[player].N = {Billboard=b,Label=l} 
                end 
                ESPObjects[player].N.Label.TextColor3 = espColor 
            else 
                if ESPObjects[player].N then ESPObjects[player].N.Billboard:Destroy() ESPObjects[player].N=nil end 
            end 

            if Settings.ESP.Meters and player.Character:FindFirstChild("Head") and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then 
                if not ESPObjects[player].M then 
                    local b = Instance.new("BillboardGui") 
                    b.Adornee=player.Character.Head 
                    b.Size=UDim2.new(0,200,0,50) 
                    b.StudsOffset=Vector3.new(0,3,0) 
                    b.AlwaysOnTop=true 
                    b.Parent=player.Character.Head 
                    local l = Instance.new("TextLabel") 
                    l.Size=UDim2.new(1,0,1,0) 
                    l.BackgroundTransparency=1 
                    l.TextColor3=espColor 
                    l.Font=Enum.Font.GothamBold 
                    l.TextSize=14 
                    l.TextStrokeTransparency=0 
                    l.Parent=b 
                    ESPObjects[player].M = l 
                end 
                local d = (player.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude 
                ESPObjects[player].M.Text = string.format("%.0fm", d) 
                ESPObjects[player].M.TextColor3 = espColor 
            else 
                if ESPObjects[player].M then ESPObjects[player].M.Parent:Destroy() ESPObjects[player].M=nil end 
            end 

            if Settings.ESP.Health and player.Character:FindFirstChild("HumanoidRootPart") and player.Character:FindFirstChild("Humanoid") then 
                if not ESPObjects[player].HB then 
                    local b = Instance.new("BillboardGui") 
                    b.Adornee=player.Character.HumanoidRootPart 
                    b.Size=UDim2.new(0,4,6,0) 
                    b.StudsOffset=Vector3.new(-3,0,0) 
                    b.AlwaysOnTop=true 
                    b.Parent=player.Character.HumanoidRootPart 
                    local f = Instance.new("Frame") 
                    f.Size=UDim2.new(1,0,1,0) 
                    f.BorderSizePixel=0 
                    f.Parent=b 
                    Corner(f,2) 
                    local bar = Instance.new("Frame") 
                    bar.Size=UDim2.new(1,0,1,0) 
                    bar.BorderSizePixel=0 
                    bar.Parent=f 
                    Corner(bar,2) 
                    ESPObjects[player].HB = {B=b,Bar=bar} 
                end 
                local h = player.Character.Humanoid.Health / player.Character.Humanoid.MaxHealth 
                ESPObjects[player].HB.Bar.Size = UDim2.new(1,0,h,0) 
                ESPObjects[player].HB.Bar.Position = UDim2.new(0,0,1-h,0) 
                ESPObjects[player].HB.Bar.BackgroundColor3 = h>0.75 and Color3.fromRGB(0,255,0) or h>0.5 and Color3.fromRGB(255,255,0) or h>0.25 and Color3.fromRGB(255,165,0) or Color3.fromRGB(255,0,0) 
            else 
                if ESPObjects[player].HB then ESPObjects[player].HB.B:Destroy() ESPObjects[player].HB=nil end 
            end 

            if Settings.ESP.Box and player.Character:FindFirstChild("HumanoidRootPart") then 
                if not ESPObjects[player].Box then 
                    local box = Drawing.new("Square") 
                    box.Visible=true 
                    box.Thickness=1 
                    box.Transparency=1 
                    box.Filled=false 
                    ESPObjects[player].Box = box 
                end 
                ESPObjects[player].Box.Color = espColor 
                local hrp = player.Character.HumanoidRootPart 
                local pos,vis = Camera:WorldToViewportPoint(hrp.Position) 
                if vis then 
                    local top = Camera:WorldToViewportPoint((hrp.CFrame*CFrame.new(0,3,0)).Position) 
                    local bot = Camera:WorldToViewportPoint((hrp.CFrame*CFrame.new(0,-3,0)).Position) 
                    local h = math.abs(top.Y-bot.Y) 
                    local w = h/2 
                    ESPObjects[player].Box.Size = Vector2.new(w,h) 
                    ESPObjects[player].Box.Position = Vector2.new(pos.X-w/2,pos.Y-h/2) 
                    ESPObjects[player].Box.Visible = true 
                else 
                    ESPObjects[player].Box.Visible = false 
                end 
            else 
                if ESPObjects[player].Box then ESPObjects[player].Box:Remove() ESPObjects[player].Box=nil end 
            end 

            if Settings.ESP.Line and player.Character:FindFirstChild("HumanoidRootPart") then 
                if not ESPObjects[player].L then 
                    local line = Drawing.new("Line") 
                    line.Visible=true 
                    line.Thickness=1 
                    line.Transparency=1 
                    ESPObjects[player].L = line 
                end 
                ESPObjects[player].L.Color = espColor 
                local hrp = player.Character.HumanoidRootPart 
                local pos,vis = Camera:WorldToViewportPoint(hrp.Position) 
                if vis then 
                    local start 
                    if Settings.ESP.LinePlacement=="Top" then start=Vector2.new(Camera.ViewportSize.X/2,0) elseif Settings.ESP.LinePlacement=="Low" then start=Vector2.new(Camera.ViewportSize.X/2,Camera.ViewportSize.Y) elseif Settings.ESP.LinePlacement=="Right" then start=Vector2.new(Camera.ViewportSize.X,Camera.ViewportSize.Y/2) else start=Vector2.new(0,Camera.ViewportSize.Y/2) end 
                    ESPObjects[player].L.From = start 
                    ESPObjects[player].L.To = Vector2.new(pos.X,pos.Y) 
                    ESPObjects[player].L.Visible = true 
                else 
                    ESPObjects[player].L.Visible = false 
                end 
            else 
                if ESPObjects[player].L then ESPObjects[player].L:Remove() ESPObjects[player].L=nil end 
            end 
        end) end
    
    -- Quando player respawna, reaplica ESP e Hitbox
    player.CharacterAdded:Connect(function(char)
        task.wait(0.5)
        if ESPObjects[player] then for _,obj in pairs(ESPObjects[player]) do if typeof(obj)=="Instance" then obj:Destroy() elseif typeof(obj)=="table" and obj.Remove then obj:Remove() end end ESPObjects[player]=nil end
        Update()
        ApplyHitboxToPlayer(player)
    end)
    
    RunService.RenderStepped:Connect(Update)
end

local FlyBV,FlyBG
local function ToggleFly(s) if s then if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then local hrp = LocalPlayer.Character.HumanoidRootPart FlyBV = Instance.new("BodyVelocity") FlyBV.MaxForce=Vector3.new(9e9,9e9,9e9) FlyBV.Velocity=Vector3.new(0,0,0) FlyBV.Parent=hrp FlyBG = Instance.new("BodyGyro") FlyBG.MaxTorque=Vector3.new(9e9,9e9,9e9) FlyBG.P=9e9 FlyBG.CFrame=hrp.CFrame FlyBG.Parent=hrp end else if FlyBV then FlyBV:Destroy() FlyBV=nil end if FlyBG then FlyBG:Destroy() FlyBG=nil end end end
local function UpdateFly() if Settings.Diver.Fly and FlyBV and FlyBG then local v = Vector3.new(0,0,0) if UserInputService:IsKeyDown(Enum.KeyCode.W) then v=v+(Camera.CFrame.LookVector*Settings.Diver.FlySpeed) end if UserInputService:IsKeyDown(Enum.KeyCode.S) then v=v-(Camera.CFrame.LookVector*Settings.Diver.FlySpeed) end if UserInputService:IsKeyDown(Enum.KeyCode.A) then v=v-(Camera.CFrame.RightVector*Settings.Diver.FlySpeed) end if UserInputService:IsKeyDown(Enum.KeyCode.D) then v=v+(Camera.CFrame.RightVector*Settings.Diver.FlySpeed) end if UserInputService:IsKeyDown(Enum.KeyCode.Space) then v=v+Vector3.new(0,Settings.Diver.FlySpeed,0) end if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then v=v-Vector3.new(0,Settings.Diver.FlySpeed,0) end FlyBV.Velocity=v FlyBG.CFrame=Camera.CFrame end end
local SpinCon
local function ToggleSpin(s) if s then SpinCon = RunService.RenderStepped:Connect(function() if Settings.Diver.Spin and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then LocalPlayer.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.Angles(0,math.rad(Settings.Diver.SpinSpeed),0) end end) else if SpinCon then SpinCon:Disconnect() SpinCon=nil end end end
local IncCon
local function ToggleInc(s) if s then IncCon = RunService.RenderStepped:Connect(function() if Settings.Diver.Inclinado and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character:FindFirstChild("Humanoid") then local md = LocalPlayer.Character.Humanoid.MoveDirection if md.Magnitude>0 then LocalPlayer.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.Angles(math.rad(45) * md.Z, 0, math.rad(-45) * md.X) end end end) else if IncCon then IncCon:Disconnect() IncCon=nil end end end
local NCCon
local function ToggleNC(s) if s then NCCon = RunService.Stepped:Connect(function() if Settings.Diver.NoClip and LocalPlayer.Character then for _,p in pairs(LocalPlayer.Character:GetDescendants()) do if p:IsA("BasePart") then p.CanCollide=false end end end end) else if NCCon then NCCon:Disconnect() NCCon=nil end end end
local function Dash() if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then local hrp = LocalPlayer.Character.HumanoidRootPart local oc = {} for _,p in pairs(LocalPlayer.Character:GetDescendants()) do if p:IsA("BasePart") then oc[p]=p.CanCollide p.CanCollide=false end end hrp.CFrame = hrp.CFrame + (Camera.CFrame.LookVector * 15) task.wait(0.1) for p,c in pairs(oc) do if p and p.Parent then p.CanCollide=c end end end end
UserInputService.JumpRequest:Connect(function() if Settings.Diver.InfiniteJump and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping) end end)

-- Follow Player implementation
local function ToggleFollowPlayer(s)
    if s then
        FollowPlayerCon = RunService.Heartbeat:Connect(function()
            if Settings.Main.FollowPlayer and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                -- Se target morreu, pega outro
                if not CurrentFollowTarget or not CurrentFollowTarget.Parent or 
                   not CurrentFollowTarget.Character or 
                   not CurrentFollowTarget.Character:FindFirstChild("Humanoid") or 
                   CurrentFollowTarget.Character.Humanoid.Health <= 0 then
                    
                    -- Busca player aleat√≥rio vivo
                    local alivePlayers = {}
                    for _, p in pairs(Players:GetPlayers()) do
                        if p ~= LocalPlayer and p.Character and 
                           p.Character:FindFirstChild("Humanoid") and 
                           p.Character.Humanoid.Health > 0 and 
                           p.Character:FindFirstChild("HumanoidRootPart") then
                            table.insert(alivePlayers, p)
                        end
                    end
                    
                    if #alivePlayers > 0 then
                        CurrentFollowTarget = alivePlayers[math.random(1, #alivePlayers)]
                        print("üéØ Seguindo: " .. CurrentFollowTarget.DisplayName)
                    else
                        CurrentFollowTarget = nil
                    end
                end
                
                -- Segue o target ACIMA dele
                if CurrentFollowTarget and CurrentFollowTarget.Character and 
                   CurrentFollowTarget.Character:FindFirstChild("HumanoidRootPart") then
                    local targetPos = CurrentFollowTarget.Character.HumanoidRootPart.Position
                    local followHeight = Settings.Main.FollowDistance or 10
                    local newPos = targetPos + Vector3.new(0, followHeight, 0)
                    
                    pcall(function()
                        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(newPos)
                    end)
                end
            end
        end)
    else
        if FollowPlayerCon then
            FollowPlayerCon:Disconnect()
            FollowPlayerCon = nil
        end
        CurrentFollowTarget = nil
        print("‚ùå Follow desativado")
    end
end

local function ApplyKA()
    if Settings.Diver.KillAura and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        for _,p in pairs(Players:GetPlayers()) do
            if p~=LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") and p.Character:FindFirstChild("Humanoid") then
                local d = (p.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                if d <= Settings.Diver.KillAuraDistance then
                    -- Tenta v√°rios m√©todos para causar dano
                    local tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
                    if tool then
                        -- Aponta para o player e ataca
                        local oldCF = LocalPlayer.Character.HumanoidRootPart.CFrame
                        LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(LocalPlayer.Character.HumanoidRootPart.Position, p.Character.HumanoidRootPart.Position)
                        task.wait(0.05)
                        tool:Activate()
                        pcall(function() mouse1click() end)
                        task.wait(0.05)
                        LocalPlayer.Character.HumanoidRootPart.CFrame = oldCF
                    else
                        -- Tenta dar dano direto (funciona em alguns jogos)
                        pcall(function()
                            p.Character.Humanoid:TakeDamage(100)
                        end)
                        -- Tenta m√©todo alternativo
                        pcall(function()
                            p.Character.Humanoid.Health = p.Character.Humanoid.Health - 100
                        end)
                    end
                end
            end
        end
    end
end

local GodModeCon
local function ToggleGodMode(s)
    if s then
        GodModeCon = RunService.Heartbeat:Connect(function()
            if Settings.Diver.GodMode and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                local hum = LocalPlayer.Character.Humanoid
                if hum.Health < hum.MaxHealth then
                    hum.Health = hum.MaxHealth
                end
            end
        end)
    else
        if GodModeCon then
            GodModeCon:Disconnect()
            GodModeCon = nil
        end
    end
end

local HackerSkinCon
local OriginalCharacterAppearance = {}
local function ToggleHackerSkin(s)
    if s then
        if LocalPlayer.Character then
            -- Remove texturas e deixa tudo Studs
            for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    if not OriginalCharacterAppearance[part] then
                        OriginalCharacterAppearance[part] = {
                            Material = part.Material,
                            Transparency = part.Transparency
                        }
                    end
                    part.Material = Enum.Material.SmoothPlastic
                    if part.Name ~= "HumanoidRootPart" then
                        part.Transparency = 0
                    end
                end
                -- Remove decals e texturas
                if part:IsA("Decal") or part:IsA("Texture") then
                    part:Destroy()
                end
            end
            
            -- Loop de mudan√ßa de cor arco-√≠ris
            HackerSkinCon = RunService.RenderStepped:Connect(function()
                if Settings.Diver.HackerSkin and LocalPlayer.Character then
                    local chromaColor = GetChromaColor()
                    for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                        if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                            part.Color = chromaColor.Color
                        end
                    end
                end
            end)
        end
    else
        if HackerSkinCon then
            HackerSkinCon:Disconnect()
            HackerSkinCon = nil
        end
        -- Restaura apar√™ncia original
        if LocalPlayer.Character then
            for part, props in pairs(OriginalCharacterAppearance) do
                if part and part.Parent then
                    part.Material = props.Material
                    part.Transparency = props.Transparency
                end
            end
        end
        OriginalCharacterAppearance = {}
    end
end

-- Remove Fog
local function ToggleRemoveFog(s)
    local Lighting = game:GetService("Lighting")
    if s then
        if not OriginalFog then
            OriginalFog = {
                FogEnd = Lighting.FogEnd,
                FogStart = Lighting.FogStart
            }
        end
        Lighting.FogEnd = 100000
        Lighting.FogStart = 0
    else
        if OriginalFog then
            Lighting.FogEnd = OriginalFog.FogEnd
            Lighting.FogStart = OriginalFog.FogStart
        end
    end
end

-- FullBright
local function ToggleFullBright(s)
    local Lighting = game:GetService("Lighting")
    if s then
        if not OriginalBrightness then
            OriginalBrightness = {
                Brightness = Lighting.Brightness,
                Ambient = Lighting.Ambient,
                OutdoorAmbient = Lighting.OutdoorAmbient
            }
        end
        Lighting.Brightness = 2
        Lighting.Ambient = Color3.fromRGB(255,255,255)
        Lighting.OutdoorAmbient = Color3.fromRGB(255,255,255)
    else
        if OriginalBrightness then
            Lighting.Brightness = OriginalBrightness.Brightness
            Lighting.Ambient = OriginalBrightness.Ambient
            Lighting.OutdoorAmbient = OriginalBrightness.OutdoorAmbient
        end
    end
end

-- Auto Dodge
local AutoDodgeCon
local function ToggleAutoDodge(s)
    if s then
        AutoDodgeCon = RunService.Heartbeat:Connect(function()
            if Settings.Diver.AutoDodge and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                for _, p in pairs(Players:GetPlayers()) do
                    if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                        local distance = (p.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
                        if distance <= Settings.Diver.DodgeDistance then
                            -- Teleporta para longe
                            local direction = (LocalPlayer.Character.HumanoidRootPart.Position - p.Character.HumanoidRootPart.Position).Unit
                            local newPos = LocalPlayer.Character.HumanoidRootPart.Position + (direction * 10)
                            LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(newPos)
                        end
                    end
                end
            end
        end)
    else
        if AutoDodgeCon then
            AutoDodgeCon:Disconnect()
            AutoDodgeCon = nil
        end
    end
end

-- TP Players
local TPPlayersCon
local function ToggleTPPlayers(s)
    if s then
        TPPlayersCon = RunService.Heartbeat:Connect(function()
            if Settings.Main.TPPlayers and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                -- Se target atual morreu, pega outro
                if not CurrentTPTarget or not CurrentTPTarget.Parent or not CurrentTPTarget.Character or not CurrentTPTarget.Character:FindFirstChild("Humanoid") or CurrentTPTarget.Character.Humanoid.Health <= 0 then
                    for _, p in pairs(Players:GetPlayers()) do
                        if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Humanoid") and p.Character.Humanoid.Health > 0 then
                            CurrentTPTarget = p
                            break
                        end
                    end
                end
                
                -- TP para o target
                if CurrentTPTarget and CurrentTPTarget.Character and CurrentTPTarget.Character:FindFirstChild("HumanoidRootPart") then
                    local targetPos = CurrentTPTarget.Character.HumanoidRootPart.Position
                    local offset = Vector3.new(0, Settings.Main.TPPlayersDistance, 0)
                    LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(targetPos + offset)
                end
            end
        end)
    else
        if TPPlayersCon then
            TPPlayersCon:Disconnect()
            TPPlayersCon = nil
        end
        CurrentTPTarget = nil
    end
end

print("üü£ ULTRA BLOOD - Core carregado")

local function UpdateScrollCanvasSize(scrollFrame)
    if not scrollFrame then return end
    local layout = scrollFrame:FindFirstChildOfClass("UIListLayout")
    if layout then
        -- Atualiza imediatamente
        scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 30)
        
        -- Conecta ao evento para atualizar dinamicamente
        layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
            scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 30)
        end)
    end
end

-- Fun√ß√£o para togglear Vision10x (aplica/restaura FieldOfView)
local function ToggleVision10x(s)
    Settings.Diver.Vision10xEnabled = s
    if s then
        if workspace.CurrentCamera then
            if not OriginalFOV then
                OriginalFOV = workspace.CurrentCamera.FieldOfView
            end
            -- aplica o FOV configurado imediatamente
            workspace.CurrentCamera.FieldOfView = Settings.Diver.Vision10x or 100
            -- garante que nada sobrescreva enquanto estiver ativo
            if Vision10xCon then Vision10xCon:Disconnect() Vision10xCon = nil end
            Vision10xCon = RunService.RenderStepped:Connect(function()
                if Settings.Diver.Vision10xEnabled and workspace.CurrentCamera then
                    workspace.CurrentCamera.FieldOfView = Settings.Diver.Vision10x or 100
                end
            end)
        end
        -- ‚úÖ FUN√á√ÉO AUXILIAR: Atualiza CanvasSize automaticamente

        if VisionSliderFrame then
            VisionSliderFrame.Visible = true
        end
    else
        -- desconecta o loop que fixa o FOV e restaura o original
        if Vision10xCon then Vision10xCon:Disconnect() Vision10xCon = nil end
        if workspace.CurrentCamera and OriginalFOV then
            workspace.CurrentCamera.FieldOfView = OriginalFOV
        end
        if VisionSliderFrame then
            VisionSliderFrame.Visible = false
        end
    end
end
-- ‚úÖ NOVO: WALL TRANSPARENCY FUNCTION
local OriginalWallTransparency = {}

local function ToggleWallTransparency(enabled)
    Settings.Diver.WallTransparency = enabled
    
    if enabled then
        print("üß± Wall Transparency ATIVADO (0.4)")
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("BasePart") and not obj:IsDescendantOf(LocalPlayer.Character or workspace) then
                if not OriginalWallTransparency[obj] then
                    OriginalWallTransparency[obj] = obj.Transparency
                end
                obj.Transparency = 0.4
            end
        end
        
        workspace.DescendantAdded:Connect(function(obj)
            if Settings.Diver.WallTransparency and obj:IsA("BasePart") and not obj:IsDescendantOf(LocalPlayer.Character or workspace) then
                task.wait(0.1)
                if not OriginalWallTransparency[obj] then
                    OriginalWallTransparency[obj] = obj.Transparency
                end
                obj.Transparency = 0.4
            end
        end)
    else
        print("‚ùå Wall Transparency DESATIVADO")
        for obj, originalTrans in pairs(OriginalWallTransparency) do
            if obj and obj.Parent then
                obj.Transparency = originalTrans
            end
        end
        OriginalWallTransparency = {}
    end
end

local function CreateFPSViewer()
    if FPSViewerFrame then
        FPSViewerFrame:Destroy()
        FPSViewerFrame = nil
    end
    
    FPSViewerFrame = Instance.new("ScreenGui")
    FPSViewerFrame.Name = "FPSViewer"
    FPSViewerFrame.ResetOnSpawn = false
    FPSViewerFrame.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    FPSViewerFrame.Parent = LocalPlayer:WaitForChild("PlayerGui")
    
    local BG = Instance.new("Frame")
    BG.Name = "Background"
    BG.Size = UDim2.new(0, 150, 0, 60)
    BG.Position = UDim2.new(0, 10, 0, 100)
    BG.BackgroundColor3 = Color3.fromRGB(
        Settings.Diver.FPSFrameColor.R,
        Settings.Diver.FPSFrameColor.G,
        Settings.Diver.FPSFrameColor.B
    )
    BG.BackgroundTransparency = Settings.Diver.FPSTransparency
    BG.BorderSizePixel = 0
    BG.Active = true
    BG.Draggable = true
    BG.Parent = FPSViewerFrame
    Corner(BG, 10)
    Stroke(BG, Color3.fromRGB(200, 100, 255), 2)
    Gradient(BG, Settings.Colors.Panel)
    
    local Label = Instance.new("TextLabel")
    Label.Name = "FPSLabel"
    Label.Size = UDim2.new(1, -10, 0, 25)
    Label.Position = UDim2.new(0, 5, 0, 5)
    Label.BackgroundTransparency = 1
    Label.Text = "FPS"
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.Font = Enum.Font.GothamBold
    Label.TextSize = 14
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = BG
    
    FPSViewerText = Instance.new("TextLabel")
    FPSViewerText.Name = "FPSValue"
    FPSViewerText.Size = UDim2.new(1, -10, 0, 30)
    FPSViewerText.Position = UDim2.new(0, 5, 0, 25)
    FPSViewerText.BackgroundTransparency = 1
    FPSViewerText.Text = "60"
    FPSViewerText.TextColor3 = Color3.fromRGB(0, 255, 0)
    FPSViewerText.TextSize = 28
    FPSViewerText.TextXAlignment = Enum.TextXAlignment.Center
    FPSViewerText.Parent = BG
    
    UpdateFPSFont()
    
    return FPSViewerFrame
end

local function UpdateFPSFont()
    if not FPSViewerText then return end
    
    if Settings.Diver.FPSFont == "GothamBold" then
        FPSViewerText.Font = Enum.Font.GothamBold
        FPSViewerText.TextSize = 28
    elseif Settings.Diver.FPSFont == "Code" then
        FPSViewerText.Font = Enum.Font.Code
        FPSViewerText.TextSize = 24
    elseif Settings.Diver.FPSFont == "Arcade" then
        FPSViewerText.Font = Enum.Font.Arcade
        FPSViewerText.TextSize = 24
    elseif Settings.Diver.FPSFont == "Minecraft" then
        FPSViewerText.Font = Enum.Font.RobotoMono
        FPSViewerText.TextSize = 22
    end
end

local function UpdateFPSFrameColor()
    if not FPSViewerFrame then return end
    local BG = FPSViewerFrame:FindFirstChild("Background")
    if BG then
        BG.BackgroundColor3 = Color3.fromRGB(
            Settings.Diver.FPSFrameColor.R,
            Settings.Diver.FPSFrameColor.G,
            Settings.Diver.FPSFrameColor.B
        )
        BG.BackgroundTransparency = Settings.Diver.FPSTransparency
    end
end

local function UpdateFPS()
    FrameCounter = FrameCounter + 1
    local currentTime = tick()
    local deltaTime = currentTime - LastFrameTime
    
    if deltaTime >= 0.5 then
        CurrentFPS = math.floor(FrameCounter / deltaTime)
        FrameCounter = 0
        LastFrameTime = currentTime
        
        if FPSViewerText then
            FPSViewerText.Text = tostring(CurrentFPS)
            
            if Settings.Diver.FPSRainbow then
                FPSViewerText.TextColor3 = GetChromaColor()
            else
                if CurrentFPS >= 60 then
                    FPSViewerText.TextColor3 = Color3.fromRGB(0, 255, 0)
                elseif CurrentFPS >= 30 then
                    FPSViewerText.TextColor3 = Color3.fromRGB(255, 255, 0)
                else
                    FPSViewerText.TextColor3 = Color3.fromRGB(255, 0, 0)
                end
            end
        end
    end
end

local function ToggleFPSViewer(enabled)
    Settings.Diver.FPSViewerEnabled = enabled
    
    if enabled then
        CreateFPSViewer()
        
        if FPSUpdateConnection then
            FPSUpdateConnection:Disconnect()
        end
        
        FPSUpdateConnection = RunService.RenderStepped:Connect(function()
            if Settings.Diver.FPSViewerEnabled then
                UpdateFPS()
            end
        end)
        
        print("üìä FPS Viewer ATIVADO")
    else
        if FPSViewerFrame then
            FPSViewerFrame:Destroy()
            FPSViewerFrame = nil
        end
        
        if FPSUpdateConnection then
            FPSUpdateConnection:Disconnect()
            FPSUpdateConnection = nil
        end
        
        print("‚ùå FPS Viewer DESATIVADO")
    end
end

-- UI COMPLETA COM SHIFT+Z GLOBAL
local function CreateUI()
    local SG = Instance.new("ScreenGui") SG.Name = "UltraBloodPanel" SG.ResetOnSpawn = false SG.ZIndexBehavior = Enum.ZIndexBehavior.Sibling GUI = SG



MainFrame = Instance.new("Frame") 
MainFrame.Name = "Main" 
MainFrame.Size = UDim2.new(0,700,0,500) 
MainFrame.Position = UDim2.new(0.5,-350,0.5,-250) 
MainFrame.BackgroundColor3 = C.BG 
MainFrame.BorderSizePixel = 0 
MainFrame.Parent = SG 
Corner(MainFrame,15)

-- ‚ú® BORDA INICIAL ANIMADA COM GRADIENTE ROXO E BRANCO ‚ú®
local InitialBorder = Instance.new("UIStroke")
InitialBorder.Color = Color3.fromRGB(Settings.Colors.Border.R, Settings.Colors.Border.G, Settings.Colors.Border.B)
InitialBorder.Thickness = 5
InitialBorder.Parent = MainFrame
InitialBorder.Name = "InitialBorder"

local InitialGradient = Instance.new("UIGradient")
InitialGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(138, 43, 226)),    -- Roxo escuro (BlueViolet)
    ColorSequenceKeypoint.new(0.25, Color3.fromRGB(186, 85, 211)), -- Roxo m√©dio (MediumOrchid)
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(230, 230, 250)), -- Branco levemente roxo (Lavender)
    ColorSequenceKeypoint.new(0.75, Color3.fromRGB(186, 85, 211)), -- Roxo m√©dio (MediumOrchid)
    ColorSequenceKeypoint.new(1, Color3.fromRGB(138, 43, 226))     -- Roxo escuro (BlueViolet)
})
InitialGradient.Rotation = 0
InitialGradient.Parent = InitialBorder

-- üîÑ Anima√ß√£o de rota√ß√£o do gradiente (velocidade: 3¬∞ por frame)
task.spawn(function()
    while InitialBorder and InitialBorder.Parent and InitialGradient and InitialGradient.Parent do
        for rot = 0, 360, 3 do
            if not InitialBorder or not InitialBorder.Parent or not InitialGradient or not InitialGradient.Parent then break end
            InitialGradient.Rotation = rot
            task.wait(0.03)
        end
    end
end)

-- üíì Anima√ß√£o de pulsa√ß√£o da espessura (5-8 pixels)
task.spawn(function()
    while InitialBorder and InitialBorder.Parent do
        -- Crescendo
        for thickness = 5, 8, 0.2 do
            if not InitialBorder or not InitialBorder.Parent then break end
            InitialBorder.Thickness = thickness
            task.wait(0.05)
        end
        -- Diminuindo
        for thickness = 8, 5, -0.2 do
            if not InitialBorder or not InitialBorder.Parent then break end
            InitialBorder.Thickness = thickness
            task.wait(0.05)
        end
    end
end)

-- ‚è±Ô∏è Ap√≥s 3 segundos, transi√ß√£o suave para a borda normal
task.spawn(function()
    task.wait(3)
    if InitialBorder and InitialBorder.Parent then
        -- Fade out gradual da borda inicial
        for i = 1, 0, -0.05 do
            if not InitialBorder or not InitialBorder.Parent then break end
            InitialBorder.Transparency = 1 - i
            task.wait(0.03)
        end
        if InitialBorder and InitialBorder.Parent then
            InitialBorder:Destroy()
        end
    end
    -- Adiciona a borda normal com gradiente (usando as cores padr√£o atualizadas)
    Stroke(MainFrame,Color3.fromRGB(Settings.Colors.Border.R, Settings.Colors.Border.G, Settings.Colors.Border.B),3,true)
end)

-- Continue com o resto do c√≥digo (Title, etc...)

    local Title = Instance.new("Frame") Title.Name = "Title" Title.Size = UDim2.new(1,0,0,60) Title.BackgroundColor3 = C.SEC Title.BorderSizePixel = 0 Title.Parent = MainFrame Corner(Title,15) Stroke(Title,Color3.fromRGB(Settings.Colors.Border.R, Settings.Colors.Border.G, Settings.Colors.Border.B),2,true)
    local Icon = Instance.new("ImageLabel") Icon.Size = UDim2.new(0,45,0,45) Icon.Position = UDim2.new(0,10,0.5,-22.5) Icon.BackgroundTransparency = 1 Icon.Image = "rbxassetid://18793833129" Icon.ImageColor3 = C.ACC Icon.Parent = Title
    task.spawn(function() while Icon and Icon.Parent do for i=0,360,2 do if not Icon or not Icon.Parent then break end Icon.Rotation = i task.wait(0.03) end end end)
    TitleText = Instance.new("TextLabel") TitleText.Size = UDim2.new(0,400,1,0) TitleText.Position = UDim2.new(0,65,0,0) TitleText.BackgroundTransparency = 1 TitleText.Text = "PANEL Ultra Blood" TitleText.TextColor3 = C.ACC TitleText.Font = Enum.Font.GothamBold TitleText.TextSize = 22 TitleText.TextXAlignment = Enum.TextXAlignment.Left TitleText.Parent = Title Gradient(TitleText, Settings.Colors.Panel)
    local Ver = Instance.new("TextLabel") Ver.Size = UDim2.new(0,250,0,15) Ver.Position = UDim2.new(0,65,0,35) Ver.BackgroundTransparency = 1 Ver.Text = "Version: 1.0 | SHIFT+Z para toggle | By BarbozaW" Ver.TextColor3 = C.TXT Ver.Font = Enum.Font.Gotham Ver.TextSize = 9 Ver.TextXAlignment = Enum.TextXAlignment.Left Ver.Parent = Title
    local Status = Instance.new("Frame") Status.Size = UDim2.new(0,10,0,10) Status.Position = UDim2.new(0,315,0,42) Status.BackgroundColor3 = Color3.fromRGB(0,255,0) Status.BorderSizePixel = 0 Status.Parent = Title Corner(Status,5)
    task.spawn(function() while Status and Status.Parent do Tween(Status,{BackgroundColor3=Color3.fromRGB(100,255,100)},0.5) task.wait(0.5) Tween(Status,{BackgroundColor3=Color3.fromRGB(0,255,0)},0.5) task.wait(0.5) end end)
    local StatusText = Instance.new("TextLabel") StatusText.Size = UDim2.new(0,50,1,0) StatusText.Position = UDim2.new(1,5,0,0) StatusText.BackgroundTransparency = 1 StatusText.Text = "status" StatusText.TextColor3 = C.TXT StatusText.Font = Enum.Font.Gotham StatusText.TextSize = 10 StatusText.TextXAlignment = Enum.TextXAlignment.Left StatusText.Parent = Status
    local MinBtn = Instance.new("TextButton") MinBtn.Size = UDim2.new(0,50,0,50) MinBtn.Position = UDim2.new(1,-115,0,5) MinBtn.BackgroundColor3 = C.SEC MinBtn.Text = "‚îÅ" MinBtn.TextColor3 = C.TXT MinBtn.Font = Enum.Font.GothamBold MinBtn.TextSize = 20 MinBtn.Parent = Title Corner(MinBtn,10) Stroke(MinBtn,C.BRD,2)
    local CloseBtn = Instance.new("TextButton") CloseBtn.Size = UDim2.new(0,50,0,50) CloseBtn.Position = UDim2.new(1,-60,0,5) CloseBtn.BackgroundColor3 = C.SEC CloseBtn.Text = "X" CloseBtn.TextColor3 = C.TXT CloseBtn.Font = Enum.Font.GothamBold CloseBtn.TextSize = 20 CloseBtn.Parent = Title Corner(CloseBtn,10) Stroke(CloseBtn,C.BRD,2)
    
    Sidebar = Instance.new("Frame") Sidebar.Name = "Sidebar" Sidebar.Size = UDim2.new(0,70,1,-60) Sidebar.Position = UDim2.new(0,0,0,60) Sidebar.BackgroundColor3 = C.SEC Sidebar.BorderSizePixel = 0 Sidebar.ClipsDescendants = true Sidebar.Parent = MainFrame Stroke(Sidebar,Color3.fromRGB(Settings.Colors.Border.R, Settings.Colors.Border.G, Settings.Colors.Border.B),2,true)
    local SBLayout = Instance.new("UIListLayout") SBLayout.Padding = UDim.new(0,5) SBLayout.Parent = Sidebar
    Content = Instance.new("ScrollingFrame") Content.Name = "Content" Content.Size = UDim2.new(1,-75,1,-65) Content.Position = UDim2.new(0,75,0,60) Content.BackgroundColor3 = C.BG Content.BorderSizePixel = 0 Content.ScrollBarThickness = 4 Content.ScrollBarImageColor3 = C.ACC Content.Visible = false Content.Parent = MainFrame
    
    local function CreateCategory(name,icon)
        local Btn = Instance.new("TextButton") Btn.Size = UDim2.new(1,0,0,60) Btn.BackgroundColor3 = C.SEC Btn.BorderSizePixel = 0 Btn.Text = "" Btn.Parent = Sidebar Corner(Btn,8)
        local Ic = Instance.new("TextLabel") Ic.Size = UDim2.new(1,0,0,30) Ic.Position = UDim2.new(0,0,0,10) Ic.BackgroundTransparency = 1 Ic.Text = icon Ic.TextColor3 = C.TXT Ic.Font = Enum.Font.GothamBold Ic.TextSize = 20 Ic.Parent = Btn
        local Txt = Instance.new("TextLabel") Txt.Size = UDim2.new(1,0,0,15) Txt.Position = UDim2.new(0,0,1,-20) Txt.BackgroundTransparency = 1 Txt.Text = name Txt.TextColor3 = C.TXT Txt.Font = Enum.Font.Gotham Txt.TextSize = 10 Txt.Parent = Btn
        Btn.MouseEnter:Connect(function() Tween(Btn,{BackgroundColor3=C.ACC},0.2) Tween(Ic,{TextSize=24},0.2) if not SidebarExpanded then SidebarExpanded = true Tween(Sidebar,{Size=UDim2.new(0,180,1,-60)},0.3) Tween(Content,{Size=UDim2.new(1,-185,1,-65),Position=UDim2.new(0,185,0,60)},0.3) for _,b in pairs(Sidebar:GetChildren()) do if b:IsA("TextButton") then Tween(b,{Size=UDim2.new(1,0,0,60)},0.3) local t = b:FindFirstChildOfClass("TextLabel") if t and t.Position.Y.Offset>20 then Tween(t,{TextSize=14},0.3) end end end end end)
        Btn.MouseLeave:Connect(function() Tween(Btn,{BackgroundColor3=C.SEC},0.2) Tween(Ic,{TextSize=20},0.2) end)
        Sidebar.MouseLeave:Connect(function() if SidebarExpanded then SidebarExpanded = false Tween(Sidebar,{Size=UDim2.new(0,70,1,-60)},0.3) Tween(Content,{Size=UDim2.new(1,-75,1,-65),Position=UDim2.new(0,75,0,60)},0.3) for _,b in pairs(Sidebar:GetChildren()) do if b:IsA("TextButton") then Tween(b,{Size=UDim2.new(1,0,0,60),BackgroundColor3=C.SEC},0.3) local t = b:FindFirstChildOfClass("TextLabel") if t and t.Position.Y.Offset>20 then Tween(t,{TextSize=10},0.3) end end end end end)
        return Btn
    end
    
    local function CreateToggle(parent,text,default,callback,risk)
        local F = Instance.new("Frame") F.Size = UDim2.new(1,-10,0,40) F.BackgroundTransparency = 1 F.Parent = parent
        local Lbl = Instance.new("TextLabel") Lbl.Size = UDim2.new(0.5,0,1,0) Lbl.Position = UDim2.new(0,10,0,0) Lbl.BackgroundTransparency = 1 Lbl.Text = text Lbl.TextColor3 = C.TXT Lbl.Font = Enum.Font.Gotham Lbl.TextSize = 14 Lbl.TextXAlignment = Enum.TextXAlignment.Left Lbl.Parent = F
        if risk then local Risk = Instance.new("TextLabel") Risk.Size = UDim2.new(0,40,0,15) Risk.Position = UDim2.new(0,10,0,22) Risk.BackgroundTransparency = 1 Risk.Text = "RISK" Risk.TextColor3 = Color3.fromRGB(255,0,0) Risk.Font = Enum.Font.GothamBold Risk.TextSize = 10 Risk.Parent = F end
        
        -- KEYBIND BOX
        local KeyBox = Instance.new("TextButton") KeyBox.Size = UDim2.new(0,40,0,25) KeyBox.Position = UDim2.new(1,-170,0.5,-12.5) KeyBox.BackgroundColor3 = C.SEC KeyBox.Text = Settings.Keybinds[text] and Settings.Keybinds[text].Name or "..." KeyBox.TextColor3 = C.TXT KeyBox.Font = Enum.Font.Gotham KeyBox.TextSize = 10 KeyBox.Parent = F Corner(KeyBox,5) Stroke(KeyBox,C.BRD,1)
        local waitingForKey = false
        KeyBox.MouseButton1Click:Connect(function()
            if waitingForKey then return end
            waitingForKey = true
            KeyBox.Text = "..."
            KeyBox.BackgroundColor3 = Color3.fromRGB(50,100,50)
            local con
            con = UserInputService.InputBegan:Connect(function(inp)
                if inp.UserInputType == Enum.UserInputType.Keyboard then
                    Settings.Keybinds[text] = inp.KeyCode
                    KeyBox.Text = inp.KeyCode.Name
                    KeyBox.BackgroundColor3 = C.SEC
                    waitingForKey = false
                    con:Disconnect()
                end
            end)
        end)
        
        local Tog = Instance.new("TextButton") Tog.Size = UDim2.new(0,50,0,25) Tog.Position = UDim2.new(1,-60,0.5,-12.5) Tog.BackgroundColor3 = default and C.ACC or C.BRD Tog.Text = "" Tog.Parent = F Corner(Tog,12.5)
        if default then Gradient(Tog, Settings.Colors.Panel) end
        local Circ = Instance.new("Frame") Circ.Size = UDim2.new(0,21,0,21) Circ.Position = default and UDim2.new(1,-23,0.5,-10.5) or UDim2.new(0,2,0.5,-10.5) Circ.BackgroundColor3 = Color3.fromRGB(255,255,255) Circ.BorderSizePixel = 0 Circ.Parent = Tog Corner(Circ,10.5) Gradient(Circ, Settings.Colors.Panel)
        local val = default
        
        local function toggleFunc()
            val = not val 
            Tween(Tog,{BackgroundColor3 = val and C.ACC or C.BRD},0.2) 
            Tween(Circ,{Position = val and UDim2.new(1,-23,0.5,-10.5) or UDim2.new(0,2,0.5,-10.5)},0.3) 
            if val then 
                if not Tog:FindFirstChild("UIGradient") then Gradient(Tog, Settings.Colors.Panel) end 
            else 
                if Tog:FindFirstChild("UIGradient") then Tog.UIGradient:Destroy() end 
            end 
            if callback then callback(val) end
        end
        
        Tog.MouseButton1Click:Connect(toggleFunc)
        
        -- Registra keybind global
        table.insert(Connections, UserInputService.InputBegan:Connect(function(inp, gpe)
            if gpe then return end
            if Settings.Keybinds[text] and inp.KeyCode == Settings.Keybinds[text] then
                toggleFunc()
            end
        end))
        
        return F
    end
    
    local function CreateSlider(parent,text,min,max,default,callback)
        local F = Instance.new("Frame") F.Size = UDim2.new(1,-10,0,60) F.BackgroundTransparency = 1 F.Parent = parent
        local Lbl = Instance.new("TextLabel") Lbl.Size = UDim2.new(1,0,0,20) Lbl.Position = UDim2.new(0,10,0,0) Lbl.BackgroundTransparency = 1 Lbl.Text = text..": "..default Lbl.TextColor3 = C.TXT Lbl.Font = Enum.Font.Gotham Lbl.TextSize = 14 Lbl.TextXAlignment = Enum.TextXAlignment.Left Lbl.Parent = F
        local SBG = Instance.new("Frame") SBG.Size = UDim2.new(1,-20,0,6) SBG.Position = UDim2.new(0,10,0,30) SBG.BackgroundColor3 = C.BRD SBG.BorderSizePixel = 0 SBG.Parent = F Corner(SBG,3)
        local SF = Instance.new("Frame") SF.Size = UDim2.new((default-min)/(max-min),0,1,0) SF.BackgroundColor3 = C.ACC SF.BorderSizePixel = 0 SF.Parent = SBG Corner(SF,3) Gradient(SF, Settings.Colors.Panel)
        local SBtn = Instance.new("TextButton") SBtn.Size = UDim2.new(0,18,0,18) SBtn.Position = UDim2.new((default-min)/(max-min),-9,0.5,-9) SBtn.BackgroundColor3 = Color3.fromRGB(255,255,255) SBtn.Text = "" SBtn.Parent = SBG Corner(SBtn,9) Gradient(SBtn, Settings.Colors.Panel)
        local drag = false
        SBtn.MouseButton1Down:Connect(function() drag=true end)
        UserInputService.InputEnded:Connect(function(inp) if inp.UserInputType==Enum.UserInputType.MouseButton1 then drag=false end end)
        RunService.RenderStepped:Connect(function() if drag then local m = UserInputService:GetMouseLocation() local rx = m.X - SBG.AbsolutePosition.X local pct = math.clamp(rx/SBG.AbsoluteSize.X,0,1) local val = math.floor(min+(max-min)*pct) Tween(SF,{Size=UDim2.new(pct,0,1,0)},0.1) Tween(SBtn,{Position=UDim2.new(pct,-9,0.5,-9)},0.1) Lbl.Text = text..": "..val if callback then callback(val) end end end)
        return F
    end
    
    local function CreateDropdown(parent,text,options,default,callback)
        local F = Instance.new("Frame") F.Size = UDim2.new(1,-10,0,40) F.BackgroundTransparency = 1 F.Parent = parent
        local Lbl = Instance.new("TextLabel") Lbl.Size = UDim2.new(0.4,0,1,0) Lbl.Position = UDim2.new(0,10,0,0) Lbl.BackgroundTransparency = 1 Lbl.Text = text Lbl.TextColor3 = C.TXT Lbl.Font = Enum.Font.Gotham Lbl.TextSize = 14 Lbl.TextXAlignment = Enum.TextXAlignment.Left Lbl.Parent = F
        local Btn = Instance.new("TextButton") Btn.Size = UDim2.new(0.55,0,0,30) Btn.Position = UDim2.new(0.45,0,0.5,-15) Btn.BackgroundColor3 = C.SEC Btn.Text = default Btn.TextColor3 = C.TXT Btn.Font = Enum.Font.Gotham Btn.TextSize = 12 Btn.Parent = F Corner(Btn,8) Stroke(Btn,C.BRD,2)
        local Opts = Instance.new("Frame") Opts.Size = UDim2.new(0.55,0,0,#options*30) Opts.Position = UDim2.new(0.45,0,1,5) Opts.BackgroundColor3 = C.SEC Opts.BorderSizePixel = 0 Opts.Visible = false Opts.ZIndex = 10 Opts.Parent = F Corner(Opts,8) Stroke(Opts,C.ACC,2)
        local OL = Instance.new("UIListLayout") OL.Parent = Opts
        for _,opt in pairs(options) do local OBtn = Instance.new("TextButton") OBtn.Size = UDim2.new(1,0,0,28) OBtn.BackgroundColor3 = C.SEC OBtn.Text = opt OBtn.TextColor3 = C.TXT OBtn.Font = Enum.Font.Gotham OBtn.TextSize = 12 OBtn.Parent = Opts OBtn.MouseEnter:Connect(function() Tween(OBtn,{BackgroundColor3=C.ACC},0.2) end) OBtn.MouseLeave:Connect(function() Tween(OBtn,{BackgroundColor3=C.SEC},0.2) end) OBtn.MouseButton1Click:Connect(function() Btn.Text = opt Opts.Visible = false if callback then callback(opt) end end) end
        Btn.MouseButton1Click:Connect(function() Opts.Visible = not Opts.Visible end)
        return F
    end
    
    -- CreateKeybind agora aceita clique de mouse tamb√©m
    local function CreateKeybind(parent,text,default,callback)
        local F = Instance.new("Frame") F.Size = UDim2.new(1,-10,0,40) F.BackgroundTransparency = 1 F.Parent = parent
        local Lbl = Instance.new("TextLabel") Lbl.Size = UDim2.new(0.5,0,1,0) Lbl.Position = UDim2.new(0,10,0,0) Lbl.BackgroundTransparency = 1 Lbl.Text = text Lbl.TextColor3 = C.TXT Lbl.Font = Enum.Font.Gotham Lbl.TextSize = 14 Lbl.TextXAlignment = Enum.TextXAlignment.Left Lbl.Parent = F
        local Btn = Instance.new("TextButton") Btn.Size = UDim2.new(0.45,0,0,30) Btn.Position = UDim2.new(0.55,0,0.5,-15) Btn.BackgroundColor3 = C.SEC 
        -- Safe default text
        if default and default.Name then
            Btn.Text = default.Name
        else
            Btn.Text = tostring(default or "...")
        end
        Btn.TextColor3 = C.TXT Btn.Font = Enum.Font.Gotham Btn.TextSize = 12 Btn.Parent = F Corner(Btn,8) Stroke(Btn,C.BRD,2)
        local wait = false local con
        Btn.MouseButton1Click:Connect(function() if wait then return end wait = true Btn.Text = "Press..." Btn.BackgroundColor3 = Color3.fromRGB(50,100,50) if con then con:Disconnect() end con = UserInputService.InputBegan:Connect(function(inp) if not wait then return end
                -- ACEITA TECLADO E BOT√ïES DO MOUSE
                if inp.UserInputType == Enum.UserInputType.Keyboard or 
                   inp.UserInputType == Enum.UserInputType.MouseButton1 or 
                   inp.UserInputType == Enum.UserInputType.MouseButton2 then
                    
                    local keyName = inp.UserInputType == Enum.UserInputType.MouseButton1 and "MB1" 
                                 or inp.UserInputType == Enum.UserInputType.MouseButton2 and "MB2" 
                                 or inp.KeyCode.Name
                    
                    Btn.Text = keyName
                    Btn.BackgroundColor3 = C.SEC
                    wait = false
                    if callback then callback(inp.KeyCode, inp.UserInputType) end
                    if con then con:Disconnect() con=nil end
                end
            end) end)
        return F
    end
    
    local function CreateRGBSlider(parent,text,default,callback)
        local F = Instance.new("Frame") F.Size = UDim2.new(1,-10,0,260) F.BackgroundTransparency = 1 F.Parent = parent
        local Lbl = Instance.new("TextLabel") Lbl.Size = UDim2.new(0.6,0,0,25) Lbl.Position = UDim2.new(0,10,0,0) Lbl.BackgroundTransparency = 1 Lbl.Text = text Lbl.TextColor3 = C.TXT Lbl.Font = Enum.Font.GothamBold Lbl.TextSize = 16 Lbl.TextXAlignment = Enum.TextXAlignment.Left Lbl.Parent = F
        
        -- BOT√ÉO CHROMA
        local ChromaBtn = Instance.new("TextButton") ChromaBtn.Size = UDim2.new(0,80,0,30) ChromaBtn.Position = UDim2.new(0,10,0,30) ChromaBtn.BackgroundColor3 = default.Chroma and Color3.fromRGB(0,255,0) or Color3.fromRGB(100,100,100) ChromaBtn.Text = "CHROMA" ChromaBtn.TextColor3 = Color3.fromRGB(255,255,255) ChromaBtn.Font = Enum.Font.GothamBold ChromaBtn.TextSize = 12 ChromaBtn.Parent = F Corner(ChromaBtn,5)
        
        ChromaBtn.MouseButton1Click:Connect(function()
            default.Chroma = not default.Chroma
            ChromaBtn.BackgroundColor3 = default.Chroma and Color3.fromRGB(0,255,0) or Color3.fromRGB(100,100,100)
        end)
        
        -- PALETA DE PREVIEW
        local Preview = Instance.new("Frame") Preview.Size = UDim2.new(0,80,0,80) Preview.Position = UDim2.new(1,-90,0,0) Preview.BackgroundColor3 = Color3.fromRGB(default.R, default.G, default.B) Preview.BorderSizePixel = 0 Preview.Parent = F Corner(Preview,10) Stroke(Preview,Color3.fromRGB(255,255,255),3)
        Gradient(Preview, default)
        local PreviewText = Instance.new("TextLabel") PreviewText.Size = UDim2.new(1,0,1,0) PreviewText.BackgroundTransparency = 1 PreviewText.Text = "PREVIEW" PreviewText.TextColor3 = Color3.fromRGB(255,255,255) PreviewText.Font = Enum.Font.GothamBold PreviewText.TextSize = 12 PreviewText.TextStrokeTransparency = 0 PreviewText.Parent = Preview
        
        local rVal,gVal,bVal = default.R,default.G,default.B
        local function UpdatePreview() Preview.BackgroundColor3 = Color3.fromRGB(rVal, gVal, bVal) for i,v in pairs(Preview:GetChildren()) do if v:IsA("UIGradient") then v:Destroy() end end Gradient(Preview, {R=rVal,G=gVal,B=bVal}) end
        
        local function CreateColorSlider(name,yPos,color,defaultVal)
            local SLbl = Instance.new("TextLabel") SLbl.Size = UDim2.new(0,30,0,20) SLbl.Position = UDim2.new(0,10,0,yPos) SLbl.BackgroundTransparency = 1 SLbl.Text = name SLbl.TextColor3 = color SLbl.Font = Enum.Font.GothamBold SLbl.TextSize = 14 SLbl.TextXAlignment = Enum.TextXAlignment.Left SLbl.Parent = F
            local SBG = Instance.new("Frame") SBG.Size = UDim2.new(1,-200,0,8) SBG.Position = UDim2.new(0,50,0,yPos+6) SBG.BackgroundColor3 = C.BRD SBG.BorderSizePixel = 0 SBG.Parent = F Corner(SBG,4)
            local SF = Instance.new("Frame") SF.Size = UDim2.new(defaultVal/255,0,1,0) SF.BackgroundColor3 = color SF.BorderSizePixel = 0 SF.Parent = SBG Corner(SF,4)
            local SBtn = Instance.new("TextButton") SBtn.Size = UDim2.new(0,20,0,20) SBtn.Position = UDim2.new(defaultVal/255,-10,0.5,-10) SBtn.BackgroundColor3 = Color3.fromRGB(255,255,255) SBtn.Text = "" SBtn.Parent = SBG Corner(SBtn,10)
            local VLbl = Instance.new("TextLabel") VLbl.Size = UDim2.new(0,50,0,20) VLbl.Position = UDim2.new(1,-95,0,yPos) VLbl.BackgroundTransparency = 1 VLbl.Text = tostring(defaultVal) VLbl.TextColor3 = C.TXT VLbl.Font = Enum.Font.Gotham VLbl.TextSize = 12 VLbl.Parent = F
            local drag = false
            SBtn.MouseButton1Down:Connect(function() drag=true end)
            UserInputService.InputEnded:Connect(function(inp) if inp.UserInputType==Enum.UserInputType.MouseButton1 then drag=false end end)
            RunService.RenderStepped:Connect(function() if drag then local m = UserInputService:GetMouseLocation() local rx = m.X - SBG.AbsolutePosition.X local pct = math.clamp(rx/SBG.AbsoluteSize.X,0,1) local val = math.floor(255*pct) Tween(SF,{Size=UDim2.new(pct,0,1,0)},0.1) Tween(SBtn,{Position=UDim2.new(pct,-10,0.5,-10)},0.1) VLbl.Text = tostring(val) if name=="R:" then rVal=val elseif name=="G:" then gVal=val else bVal=val end UpdatePreview() if callback then callback({R=rVal,G=gVal,B=bVal,Chroma=default.Chroma}) end end end)
        end
        CreateColorSlider("R:",75,Color3.fromRGB(255,0,0),default.R)
        CreateColorSlider("G:",125,Color3.fromRGB(0,255,0),default.G)
        CreateColorSlider("B:",175,Color3.fromRGB(0,0,255),default.B)
        return F
    end

    
    -- P√ÅGINAS
    local MainBtn = CreateCategory("Main","‚öî")
    local MainPage = nil
    MainBtn.MouseButton1Click:Connect(function()
        Content.Visible = true
        for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
        local Page = Instance.new("Frame") Page.Size = UDim2.new(1,0,0,0) Page.BackgroundTransparency = 1 Page.Parent = Content
        local L = Instance.new("UIListLayout") L.Padding = UDim.new(0,10) L.Parent = Page
        local P = Instance.new("UIPadding") P.PaddingTop,P.PaddingLeft = UDim.new(0,10),UDim.new(0,10) P.Parent = Page
        CreateToggle(Page,"Aimbot Head",Settings.Main.AimbotHead,function(v) Settings.Main.AimbotHead=v end)
        CreateToggle(Page,"Aimbot Safe",Settings.Main.AimbotSafe,function(v) Settings.Main.AimbotSafe=v end)
        CreateSlider(Page,"Safe MS (Tiros Corpo)",0,600,Settings.Main.SafeMS or 60,function(v) 
            Settings.Main.SafeMS = v
            local bodyShots = math.floor(v / 60)
            print("üéØ Aimbot Safe: " .. bodyShots .. " tiros no corpo (MS: " .. v .. ")")
        end)
        CreateToggle(Page,"Shoot Nearest",Settings.Main.ShootNearest,function(v) Settings.Main.ShootNearest=v end)
        CreateDropdown(Page,"Aimbot Target",{"Head","HumanoidRootPart"},Settings.Main.AimbotTarget,function(v) Settings.Main.AimbotTarget=v end)
        CreateToggle(Page,"FOV",Settings.Main.FOV,function(v) Settings.Main.FOV=v if FOVCircle then FOVCircle.Visible=v end end)
        CreateSlider(Page,"FOV Size",50,500,Settings.Main.FOVSize,function(v) Settings.Main.FOVSize=v end)
        

        -- NOVO: Dropdown tipo de aimbot
        CreateDropdown(Page,"Tipo de Aimbot",{"Ao Mirar","Toogle Key"},Settings.Main.AimbotType,function(v) 
            Settings.Main.AimbotType=v 
            print("üéØ Aimbot mudado para: " .. v)
        end)

        -- NOVO: Keybind do aimbot (aceita mouse)
        CreateKeybind(Page,"Aimbot Toogle Key",Settings.Main.AimbotKey or Enum.KeyCode.E,function(keyCode, inputType)
            if inputType == Enum.UserInputType.MouseButton1 or inputType == Enum.UserInputType.MouseButton2 then
                Settings.Main.AimbotMouseButton = inputType
                Settings.Main.AimbotKey = nil
                print("üéØ Aimbot: " .. (inputType == Enum.UserInputType.MouseButton1 and "MB1" or "MB2"))
            else
                Settings.Main.AimbotKey = keyCode
                Settings.Main.AimbotMouseButton = nil
                if keyCode and keyCode.Name then
                    print("üéØ Aimbot Key: " .. keyCode.Name)
                end
            end
        end)

        CreateToggle(Page,"Hitbox Expander",Settings.Main.HitboxEnabled,function(v) Settings.Main.HitboxEnabled=v ApplyHitbox() end)
        CreateSlider(Page,"Hitbox",5,50,Settings.Main.HitboxSize,function(v) Settings.Main.HitboxSize=v ApplyHitbox() end)
        CreateDropdown(Page,"Hitbox Shape",{"Box","Circle"},Settings.Main.HitboxShape,function(v) Settings.Main.HitboxShape=v ApplyHitbox() end)
        CreateDropdown(Page,"Hitbox Part",{"HumanoidRootPart","Head"},Settings.Main.HitboxPart,function(v) Settings.Main.HitboxPart=v ApplyHitbox() end)
        CreateToggle(Page,"No Recoil",Settings.Main.NoRecoil,function(v) Settings.Main.NoRecoil=v end,true)
        CreateToggle(Page,"Inf. Munition",Settings.Main.InfMunition,function(v) Settings.Main.InfMunition=v end,true)
        CreateToggle(Page,"TP Players",Settings.Main.TPPlayers,function(v) Settings.Main.TPPlayers=v ToggleTPPlayers(v) end)
        CreateSlider(Page,"TP Distance",1,20,Settings.Main.TPPlayersDistance,function(v) Settings.Main.TPPlayersDistance=v end)

        -- NOVO: Follow Player
        CreateToggle(Page,"Follow Player (Acima)",Settings.Main.FollowPlayer,function(v) 
            Settings.Main.FollowPlayer=v 
            ToggleFollowPlayer(v) 
        end)
        CreateSlider(Page,"Follow Height",5,30,Settings.Main.FollowDistance,function(v) 
            Settings.Main.FollowDistance=v 
        end)

        Page.Size = UDim2.new(1,0,0,L.AbsoluteContentSize.Y)
        UpdateScrollCanvasSize(Content)
        MainPage = Page
    end)
    
    local ESPBtn = CreateCategory("ESP","üëÅ")
    ESPBtn.MouseButton1Click:Connect(function()
        Content.Visible = true
        for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
        local Page = Instance.new("Frame") Page.Size = UDim2.new(1,0,0,0) Page.BackgroundTransparency = 1 Page.Parent = Content
        local L = Instance.new("UIListLayout") L.Padding = UDim.new(0,10) L.Parent = Page
        local P = Instance.new("UIPadding") P.PaddingTop,P.PaddingLeft = UDim.new(0,10),UDim.new(0,10) P.Parent = Page
        CreateToggle(Page,"ESP",Settings.ESP.Enabled,function(v) Settings.ESP.Enabled=v end)
        CreateToggle(Page,"ESP Times",Settings.ESP.Team,function(v) Settings.ESP.Team=v end)
        CreateToggle(Page,"Chams",Settings.ESP.Chams,function(v) Settings.ESP.Chams=v end)
        CreateToggle(Page,"Chams Times",Settings.ESP.ChamsTeam,function(v) Settings.ESP.ChamsTeam=v end)
        CreateToggle(Page,"ESP Name",Settings.ESP.Name,function(v) Settings.ESP.Name=v end)
        CreateToggle(Page,"ESP Caixa",Settings.ESP.Box,function(v) Settings.ESP.Box=v end)
        CreateToggle(Page,"ESP Linha",Settings.ESP.Line,function(v) Settings.ESP.Line=v end)
        CreateDropdown(Page,"Linha Placement",{"Top","Low","Right","Left"},Settings.ESP.LinePlacement,function(v) Settings.ESP.LinePlacement=v end)
        CreateToggle(Page,"ESP Vida",Settings.ESP.Health,function(v) Settings.ESP.Health=v end)
        CreateToggle(Page,"ESP Meters",Settings.ESP.Meters,function(v) Settings.ESP.Meters=v end)
        Page.Size = UDim2.new(1,0,0,L.AbsoluteContentSize.Y)
        UpdateScrollCanvasSize(Content)
    end)
    
    local DiverBtn = CreateCategory("Diver","‚ö°")
    DiverBtn.MouseButton1Click:Connect(function()
        Content.Visible = true
        for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
        local Page = Instance.new("Frame") Page.Size = UDim2.new(1,0,0,0) Page.BackgroundTransparency = 1 Page.Parent = Content
        local L = Instance.new("UIListLayout") L.Padding = UDim.new(0,10) L.Parent = Page
        local P = Instance.new("UIPadding") P.PaddingTop,P.PaddingLeft = UDim.new(0,10),UDim.new(0,10) P.Parent = Page
        CreateSlider(Page,"Speed",16,200,Settings.Diver.Speed,function(v) Settings.Diver.Speed=v end)
        CreateSlider(Page,"JumpPower",50,200,Settings.Diver.JumpPower,function(v) Settings.Diver.JumpPower=v end)
        CreateToggle(Page,"Fly",Settings.Diver.Fly,function(v) Settings.Diver.Fly=v ToggleFly(v) end)
        CreateToggle(Page,"Wall Transparency",Settings.Diver.WallTransparency,function(v) Settings.Diver.WallTransparency=v ToggleWallTransparency(v) end)
        CreateSlider(Page,"Fly Speed",10,200,Settings.Diver.FlySpeed,function(v) Settings.Diver.FlySpeed=v end)
        CreateToggle(Page,"Spin",Settings.Diver.Spin,function(v) Settings.Diver.Spin=v ToggleSpin(v) end)
        CreateSlider(Page,"Spin Speed",1,50,Settings.Diver.SpinSpeed,function(v) Settings.Diver.SpinSpeed=v end)
        CreateToggle(Page,"Inclinado(a)",Settings.Diver.Inclinado,function(v) Settings.Diver.Inclinado=v ToggleInc(v) end)
        CreateToggle(Page,"No Clip",Settings.Diver.NoClip,function(v) Settings.Diver.NoClip=v ToggleNC(v) end)
        CreateToggle(Page,"Infinite Jump",Settings.Diver.InfiniteJump,function(v) Settings.Diver.InfiniteJump=v end)
        CreateToggle(Page,"God Mode",Settings.Diver.GodMode,function(v) Settings.Diver.GodMode=v ToggleGodMode(v) end,true)
        CreateToggle(Page,"Hacker Skin",Settings.Diver.HackerSkin,function(v) Settings.Diver.HackerSkin=v ToggleHackerSkin(v) end)
        CreateToggle(Page,"Auto Dodge",Settings.Diver.AutoDodge,function(v) Settings.Diver.AutoDodge=v ToggleAutoDodge(v) end)
        CreateSlider(Page,"Dodge Distance",5,30,Settings.Diver.DodgeDistance,function(v) Settings.Diver.DodgeDistance=v end)
        -- Atualiza CreateKeybind callback para aceitar mouse/teclado
        CreateKeybind(Page,"Dash Key",DashKey,function(keyCode, inputType) 
            if inputType == Enum.UserInputType.Keyboard and keyCode then
                DashKey = keyCode
            end
        end)
        CreateToggle(Page,"Kill Aura",Settings.Diver.KillAura,function(v) Settings.Diver.KillAura=v end)
        CreateSlider(Page,"KillAura Distance",5,50,Settings.Diver.KillAuraDistance,function(v) Settings.Diver.KillAuraDistance=v end)

        -- NOVO: Vision 10x toggle + slider (barra)
        CreateToggle(Page,"Vision 10x",Settings.Diver.Vision10xEnabled,function(v)
            ToggleVision10x(v)
        end)
        -- cria a barra (uma vez) e liga ela ao Page
        if not VisionSliderFrame then
            VisionSliderFrame = CreateVisionSlider(Page)
        else
            VisionSliderFrame.Parent = Page
        end
        VisionSliderFrame.Visible = Settings.Diver.Vision10xEnabled
        -- se j√° estiver habilitado, aplica o FOV atual
        if Settings.Diver.Vision10xEnabled and workspace.CurrentCamera then
            workspace.CurrentCamera.FieldOfView = Settings.Diver.Vision10x
            -- assegura que o connection foi criado
            if not Vision10xCon then
                Vision10xCon = RunService.RenderStepped:Connect(function()
                    if Settings.Diver.Vision10xEnabled and workspace.CurrentCamera then
                        workspace.CurrentCamera.FieldOfView = Settings.Diver.Vision10x
                         -- Separador visual
        
        
        -- Slider de Transpar√™ncia
        local TranspTitle = Instance.new("TextLabel")
        TranspTitle.Size = UDim2.new(1, -100, 0, 20)
        TranspTitle.Position = UDim2.new(0, 0, 0, 130)
        TranspTitle.BackgroundTransparency = 1
        TranspTitle.Text = "Transparency: " .. math.floor(Settings.Diver.FPSTransparency * 100) .. "%"
        TranspTitle.TextColor3 = C.TXT
        TranspTitle.Font = Enum.Font.Gotham
        TranspTitle.TextSize = 14
        TranspTitle.TextXAlignment = Enum.TextXAlignment.Left
        TranspTitle.Parent = FPSColorFrame
        
        local TranspBG = Instance.new("Frame")
        TranspBG.Size = UDim2.new(1, -200, 0, 8)
        TranspBG.Position = UDim2.new(0, 0, 0, 155)
        TranspBG.BackgroundColor3 = C.BRD
        TranspBG.BorderSizePixel = 0
        TranspBG.Parent = FPSColorFrame
        Corner(TranspBG, 4)
        
        local TranspFill = Instance.new("Frame")
        TranspFill.Size = UDim2.new(Settings.Diver.FPSTransparency, 0, 1, 0)
        TranspFill.BackgroundColor3 = Color3.fromRGB(200, 100, 255)
        TranspFill.BorderSizePixel = 0
        TranspFill.Parent = TranspBG
        Corner(TranspFill, 4)
        
        local TranspBtn = Instance.new("TextButton")
        TranspBtn.Size = UDim2.new(0, 18, 0, 18)
        TranspBtn.Position = UDim2.new(Settings.Diver.FPSTransparency, -9, 0.5, -9)
        TranspBtn.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        TranspBtn.Text = ""
        TranspBtn.Parent = TranspBG
        Corner(TranspBtn, 9)
        
        local transpDrag = false
        TranspBtn.MouseButton1Down:Connect(function() transpDrag = true end)
        UserInputService.InputEnded:Connect(function(inp)
            if inp.UserInputType == Enum.UserInputType.MouseButton1 then
                transpDrag = false
            end
        end)
        
        RunService.RenderStepped:Connect(function()
            if transpDrag then
                local m = UserInputService:GetMouseLocation()
                local rx = m.X - TranspBG.AbsolutePosition.X
                local pct = math.clamp(rx / TranspBG.AbsoluteSize.X, 0, 1)
                Tween(TranspFill, {Size = UDim2.new(pct, 0, 1, 0)}, 0.1)
                Tween(TranspBtn, {Position = UDim2.new(pct, -9, 0.5, -9)}, 0.1)
                Settings.Diver.FPSTransparency = pct
                TranspTitle.Text = "Transparency: " .. math.floor(pct * 100) .. "%"
                UpdateFPSPreview()
            end
        end)
                    end
                end)
            end
        end
        
        ‚ö†Ô∏è AGUARDA 0.1s para garantir que tudo foi renderizado
    task.wait(0.1)
    
    -- Calcula tamanho REAL da p√°gina (com margem extra)
    local totalHeight = L.AbsoluteContentSize.Y
    Page.Size = UDim2.new(1, 0, 0, totalHeight + 100)
    
    -- Define CanvasSize do Content para permitir scroll completo
    Content.CanvasSize = UDim2.new(0, 0, 0, totalHeight + 150)
    
    -- Conecta evento para atualizar quando adicionar mais elementos
    L:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        local newHeight = L.AbsoluteContentSize.Y
        Page.Size = UDim2.new(1, 0, 0, newHeight + 100)
        Content.CanvasSize = UDim2.new(0, 0, 0, newHeight + 150)
        print("üìä Scroll atualizado: " .. newHeight .. "px")
    end)
    
    print("‚úÖ Categoria Diver carregada - Altura total: " .. totalHeight .. "px")
    end)

    --[[
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë     GAME LOGS UI CATEGORY                                ‚ïë
    ‚ïë  Cole este c√≥digo DENTRO de CreateUI()                  ‚ïë
    ‚ïë  Logo AP√ìS o DiverBtn (categoria Diver)                 ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
]]

-- ‚úÖ GAME LOGS CATEGORY
local GameLogsBtn = CreateCategory(GameDetection.CurrentGame .. " - Logs", "üéÆ")

-- GRADIENT ESPECIAL (Branco/Roxo/Rosa) APENAS se jogo for suportado
if GameDetection.Supported then
    local gameData = SupportedGames[GameDetection.GameID]
    local SpecialGradient = Instance.new("UIGradient")
    SpecialGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, gameData.Color.Start),
        ColorSequenceKeypoint.new(0.5, gameData.Color.Middle),
        ColorSequenceKeypoint.new(1, gameData.Color.End)
    })
    SpecialGradient.Rotation = 0
    SpecialGradient.Parent = GameLogsBtn
    
    -- Anima√ß√£o rotativa do gradiente
    task.spawn(function()
        while GameLogsBtn and GameLogsBtn.Parent and SpecialGradient and SpecialGradient.Parent do
            SpecialGradient.Rotation = (SpecialGradient.Rotation + 2) % 360
            task.wait(0.05)
        end
    end)
end

GameLogsBtn.MouseButton1Click:Connect(function()
    Content.Visible = true
    for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
    
    local Page = Instance.new("Frame")
    Page.Size = UDim2.new(1,0,0,0)
    Page.BackgroundTransparency = 1
    Page.Parent = Content
    
    local L = Instance.new("UIListLayout")
    L.Padding = UDim.new(0,10)
    L.Parent = Page
    
    local P = Instance.new("UIPadding")
    P.PaddingTop, P.PaddingLeft = UDim.new(0,10), UDim.new(0,10)
    P.Parent = Page
    
    if GameDetection.Supported and GameDetection.CurrentGame == "Prison Life" then
        -- ‚úÖ PRISON LIFE FEATURES
        
        -- EXPLORER VIEWER
        local ExplorerTitle = Instance.new("TextLabel")
        ExplorerTitle.Size = UDim2.new(1, -10, 0, 30)
        ExplorerTitle.BackgroundTransparency = 1
        ExplorerTitle.Text = "üìÅ Game Explorer"
        ExplorerTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
        ExplorerTitle.Font = Enum.Font.GothamBold
        ExplorerTitle.TextSize = 16
        ExplorerTitle.TextXAlignment = Enum.TextXAlignment.Left
        ExplorerTitle.Parent = Page
        
        CreateExplorerViewer(Page)
        
        -- SEPARATOR
        local Sep1 = Instance.new("Frame")
        Sep1.Size = UDim2.new(1, -10, 0, 2)
        Sep1.BackgroundColor3 = Color3.fromRGB(100, 50, 200)
        Sep1.BorderSizePixel = 0
        Sep1.Parent = Page
        
        -- FEATURES TITLE
        local FeaturesTitle = Instance.new("TextLabel")
        FeaturesTitle.Size = UDim2.new(1, -10, 0, 30)
        FeaturesTitle.BackgroundTransparency = 1
        FeaturesTitle.Text = "‚ö° Prison Life Features"
        FeaturesTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
        FeaturesTitle.Font = Enum.Font.GothamBold
        FeaturesTitle.TextSize = 16
        FeaturesTitle.TextXAlignment = Enum.TextXAlignment.Left
        FeaturesTitle.Parent = Page
        
        -- DASH
        CreateToggle(Page,"Dash",Settings.GameLogs.PrisonLife.Dash,function(v) 
            Settings.GameLogs.PrisonLife.Dash=v 
        end)
        
        CreateKeybind(Page,"Dash Key",DashKey,function(keyCode, inputType) 
            if inputType == Enum.UserInputType.Keyboard and keyCode then
                DashKey = keyCode
            end
        end)
        
        -- NO RECOIL
        CreateToggle(Page,"No Recoil",Settings.GameLogs.PrisonLife.NoRecoil,function(v) 
            Settings.GameLogs.PrisonLife.NoRecoil=v 
            TogglePrisonLifeNoRecoil(v)
        end)
        
        -- AUTO CHARGE
        CreateToggle(Page,"Auto Charge",Settings.GameLogs.PrisonLife.AutoCharge,function(v) 
            Settings.GameLogs.PrisonLife.AutoCharge=v 
            TogglePrisonLifeAutoCharge(v)
        end)
        
        -- NO COOLDOWN RECHARGE
        CreateToggle(Page,"No Cooldown Recharge",Settings.GameLogs.PrisonLife.NoCooldownRecharge,function(v) 
            Settings.GameLogs.PrisonLife.NoCooldownRecharge=v 
            TogglePrisonLifeNoCooldown(v)
        end)
        
        -- ESP TEAMS
        CreateToggle(Page,"ESP Teams",Settings.GameLogs.PrisonLife.ESPTeams,function(v) 
            Settings.GameLogs.PrisonLife.ESPTeams=v 
            Settings.ESP.Team = v
        end)
        
        -- SPEED
        CreateToggle(Page,"Speed",false,function(v) 
            if v and LocalPlayer.Character then
                local hum = LocalPlayer.Character:FindFirstChild("Humanoid")
                if hum then
                    hum.WalkSpeed = Settings.GameLogs.PrisonLife.CustomSpeed
                end
            end
        end)
        
        CreateSlider(Page,"Speed Value",16,100,Settings.GameLogs.PrisonLife.CustomSpeed,function(v) 
            Settings.GameLogs.PrisonLife.CustomSpeed=v 
            if LocalPlayer.Character then
                local hum = LocalPlayer.Character:FindFirstChild("Humanoid")
                if hum then
                    hum.WalkSpeed = v
                end
            end
        end)
        
        -- NO SHIFT TO SPRINT
        CreateToggle(Page,"No Shift to Sprint",Settings.GameLogs.PrisonLife.NoShiftToSprint,function(v) 
            Settings.GameLogs.PrisonLife.NoShiftToSprint=v 
            TogglePrisonLifeNoShift(v)
        end)
        
        -- AIMBOT STICKY
        CreateToggle(Page,"Aimbot (Sticky Mouse)",Settings.GameLogs.PrisonLife.AimbotSticky,function(v) 
            Settings.GameLogs.PrisonLife.AimbotSticky=v 
            TogglePrisonLifeAimbot(v)
        end)
        
        -- FOV VISION
        CreateSlider(Page,"FOV Vision",70,140,Settings.GameLogs.PrisonLife.FOVVision,function(v) 
            Settings.GameLogs.PrisonLife.FOVVision=v 
            if workspace.CurrentCamera then
                workspace.CurrentCamera.FieldOfView = v
            end
        end)
        
        -- NO DOORS
        CreateToggle(Page,"No Doors",Settings.GameLogs.PrisonLife.NoDoors,function(v) 
            Settings.GameLogs.PrisonLife.NoDoors=v 
            TogglePrisonLifeNoDoors(v)
        end)
        
        -- GOD MODE
        CreateToggle(Page,"God Mode",Settings.GameLogs.PrisonLife.GodMode,function(v) 
            Settings.GameLogs.PrisonLife.GodMode=v 
            TogglePrisonLifeGodMode(v)
        end)
        
        -- SEPARATOR
        local Sep2 = Instance.new("Frame")
        Sep2.Size = UDim2.new(1, -10, 0, 2)
        Sep2.BackgroundColor3 = Color3.fromRGB(100, 50, 200)
        Sep2.BorderSizePixel = 0
        Sep2.Parent = Page
        
        -- TELEPORTS TITLE
        local TPTitle = Instance.new("TextLabel")
        TPTitle.Size = UDim2.new(1, -10, 0, 30)
        TPTitle.BackgroundTransparency = 1
        TPTitle.Text = "üìç Teleports"
        TPTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
        TPTitle.Font = Enum.Font.GothamBold
        TPTitle.TextSize = 16
        TPTitle.TextXAlignment = Enum.TextXAlignment.Left
        TPTitle.Parent = Page
        
        -- TELEPORTS PR√â-DEFINIDOS
        for _, tp in pairs(GameDetection.Features.Teleports) do
            local TPBtn = Instance.new("TextButton")
            TPBtn.Size = UDim2.new(1,-10,0,35)
            TPBtn.BackgroundColor3 = Color3.fromRGB(45,45,50)
            TPBtn.Text = "üìç " .. tp.Name
            TPBtn.TextColor3 = Color3.fromRGB(255,255,255)
            TPBtn.Font = Enum.Font.GothamBold
            TPBtn.TextSize = 14
            TPBtn.Parent = Page
            Corner(TPBtn,8)
            Stroke(TPBtn,C.ACC,1)
            
            TPBtn.MouseEnter:Connect(function()
                Tween(TPBtn,{BackgroundColor3=C.ACC},0.2)
            end)
            
            TPBtn.MouseLeave:Connect(function()
                Tween(TPBtn,{BackgroundColor3=Color3.fromRGB(45,45,50)},0.2)
            end)
            
            TPBtn.MouseButton1Click:Connect(function()
                TeleportToPrisonLocation(tp.Position)
            end)
        end
        
        -- CREATE CUSTOM TELEPORT BUTTON
        local CreateTPBtn = Instance.new("TextButton")
        CreateTPBtn.Size = UDim2.new(1,-10,0,45)
        CreateTPBtn.BackgroundColor3 = Color3.fromRGB(100,50,200)
        CreateTPBtn.Text = "‚ûï Create Custom Teleport"
        CreateTPBtn.TextColor3 = Color3.fromRGB(255,255,255)
        CreateTPBtn.Font = Enum.Font.GothamBold
        CreateTPBtn.TextSize = 14
        CreateTPBtn.Parent = Page
        Corner(CreateTPBtn,8)
        Gradient(CreateTPBtn, Settings.Colors.Panel)
        
        CreateTPBtn.MouseButton1Click:Connect(function()
            CreateCustomTeleport()
        end)
        
    else
        -- JOGO N√ÉO SUPORTADO
        local UnsupportedMsg = Instance.new("TextLabel")
        UnsupportedMsg.Size = UDim2.new(1,-20,0,150)
        UnsupportedMsg.BackgroundTransparency = 1
        UnsupportedMsg.Text = "‚ö†Ô∏è " .. GameDetection.CurrentGame .. "\nnot injected...\n\nThis game is not supported yet.\n\nOnly Prison Life is supported."
        UnsupportedMsg.TextColor3 = Color3.fromRGB(255,100,100)
        UnsupportedMsg.Font = Enum.Font.GothamBold
        UnsupportedMsg.TextSize = 16
        UnsupportedMsg.TextWrapped = true
        UnsupportedMsg.Parent = Page
    end
    
    Page.Size = UDim2.new(2,0,0,L.AbsoluteContentSize.Y)
    local function UpdateScrollCanvasSize(scrollFrame)
        if not scrollFrame then return end
        local layout = scrollFrame:FindFirstChildOfClass("UIListLayout")
        if layout then
            scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 30)
            layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                scrollFrame.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 30)
            end)
        end
    end
    UpdateScrollCanvasSize(Content)
end)

    
    local PlayersBtn = CreateCategory("Players","üë•")
    PlayersBtn.MouseButton1Click:Connect(function()
        Content.Visible = true
        for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
        local Page = Instance.new("Frame") Page.Size = UDim2.new(1,0,0,0) Page.BackgroundTransparency = 1 Page.Parent = Content
        local L = Instance.new("UIListLayout") L.Padding = UDim.new(0,10) L.Parent = Page
        local P = Instance.new("UIPadding") P.PaddingTop,P.PaddingLeft = UDim.new(0,10),UDim.new(0,10) P.Parent = Page
        for _,p in pairs(Players:GetPlayers()) do 
            if p ~= LocalPlayer then 
                local PF = Instance.new("Frame") PF.Size = UDim2.new(1,0,0,80) PF.BackgroundColor3 = C.SEC PF.Parent = Page Corner(PF,10) Stroke(PF,C.BRD,2) 
                local Thumb = Instance.new("ImageLabel") Thumb.Size = UDim2.new(0,60,0,60) Thumb.Position = UDim2.new(0,10,0.5,-30) Thumb.BackgroundTransparency = 1 Thumb.Image = "https://www.roblox.com/headshot-thumbnail/image?userId="..p.UserId.."&width=60&height=60&format=png" Thumb.Parent = PF Corner(Thumb,10) 
                local Name = Instance.new("TextLabel") Name.Size = UDim2.new(0.4,0,0,30) Name.Position = UDim2.new(0,80,0,10) Name.BackgroundTransparency = 1 Name.Text = p.DisplayName Name.TextColor3 = C.TXT Name.Font = Enum.Font.GothamBold Name.TextSize = 14 Name.TextXAlignment = Enum.TextXAlignment.Left Name.Parent = PF 
                local Spec = Instance.new("TextButton") Spec.Size = UDim2.new(0.2,0,0,25) Spec.Position = UDim2.new(0,80,0,45) Spec.BackgroundColor3 = C.ACC Spec.Text = "Spectate" Spec.TextColor3 = Color3.fromRGB(255,255,255) Spec.Font = Enum.Font.Gotham Spec.TextSize = 11 Spec.Parent = PF Corner(Spec,5) Gradient(Spec, Settings.Colors.Panel) 
                Spec.MouseButton1Click:Connect(function() 
                    if p.Character and p.Character:FindFirstChildOfClass("Humanoid") then
                        Camera.CameraSubject = p.Character:FindFirstChildOfClass("Humanoid") 
                    end
                end) 
                
                local Bring = Instance.new("TextButton") Bring.Size = UDim2.new(0.22,0,0,25) Bring.Position = UDim2.new(0.22,80,0,45) Bring.BackgroundColor3 = C.ACC Bring.Text = "Trazer" Bring.TextColor3 = Color3.fromRGB(255,255,255) Bring.Font = Enum.Font.Gotham Bring.TextSize = 11 Bring.Parent = PF Corner(Bring,5) Gradient(Bring, Settings.Colors.Panel) 
                Bring.MouseButton1Click:Connect(function() 
                    pcall(function()
                        if p.Character and p.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then 
                            local success = false
                            -- M√©todo 1: CFrame direto
                            pcall(function()
                                p.Character.HumanoidRootPart.CFrame = LocalPlayer.Character.HumanoidRootPart.CFrame * CFrame.new(0,0,-3)
                                success = true
                            end)
                            -- M√©todo 2: Position
                            if not success then
                                pcall(function()
                                    p.Character.HumanoidRootPart.Position = LocalPlayer.Character.HumanoidRootPart.Position + Vector3.new(0,0,-3)
                                end)
                            end
                        end
                    end)
                end) 
                
                local TP = Instance.new("TextButton") TP.Size = UDim2.new(0.18,0,0,25) TP.Position = UDim2.new(0.45,80,0,45) TP.BackgroundColor3 = C.ACC TP.Text = "TP" TP.TextColor3 = Color3.fromRGB(255,255,255) TP.Font = Enum.Font.Gotham TP.TextSize = 11 TP.Parent = PF Corner(TP,5) Gradient(TP, Settings.Colors.Panel) 
                TP.MouseButton1Click:Connect(function() 
                    pcall(function()
                        if p.Character and p.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then 
                            -- Desativa colis√£o temporariamente
                            local oldCan = {}
                            for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
                                if part:IsA("BasePart") then
                                    oldCan[part] = part.CanCollide
                                    part.CanCollide = false
                                end
                            end
                            -- Teleporta
                            LocalPlayer.Character.HumanoidRootPart.CFrame = p.Character.HumanoidRootPart.CFrame * CFrame.new(0,0,3)
                            task.wait(0.1)
                            -- Restaura colis√£o
                            for part, can in pairs(oldCan) do
                                if part and part.Parent then
                                    part.CanCollide = can
                                end
                            end
                        end
                    end)
                end) 
                
                local Kill = Instance.new("TextButton") Kill.Size = UDim2.new(0.18,0,0,25) Kill.Position = UDim2.new(0.64,80,0,45) Kill.BackgroundColor3 = Color3.fromRGB(255,50,50) Kill.Text = "Kill" Kill.TextColor3 = Color3.fromRGB(255,255,255) Kill.Font = Enum.Font.Gotham Kill.TextSize = 11 Kill.Parent = PF Corner(Kill,5) 
                Kill.MouseButton1Click:Connect(function() 
                    pcall(function()
                        if p.Character and p.Character:FindFirstChild("Humanoid") then 
                            -- Tenta v√°rios m√©todos
                            local tool = LocalPlayer.Character:FindFirstChildOfClass("Tool")
                            if tool then
                                -- M√©todo 1: Ataque com arma
                                local oldCF = LocalPlayer.Character.HumanoidRootPart.CFrame
                                for i = 1, 5 do
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(LocalPlayer.Character.HumanoidRootPart.Position, p.Character.HumanoidRootPart.Position)
                                    task.wait(0.05)
                                    tool:Activate()
                                    pcall(function() mouse1click() end)
                                end
                                LocalPlayer.Character.HumanoidRootPart.CFrame = oldCF
                            end
                            -- M√©todo 2: TakeDamage
                            pcall(function()
                                for i = 1, 10 do
                                    p.Character.Humanoid:TakeDamage(100)
                                    task.wait(0.05)
                                end
                            end)
                            -- M√©todo 3: Health direto
                            pcall(function()
                                p.Character.Humanoid.Health = 0
                            end)
                            -- M√©todo 4: BreakJoints
                            pcall(function()
                                p.Character:BreakJoints()
                            end)
                        end
                    end)
                end) 
            end 
        end

        local FPSSep = Instance.new("Frame")
        FPSSep.Size = UDim2.new(1, -10, 0, 2)
        FPSSep.BackgroundColor3 = Color3.fromRGB(100, 50, 200)
        FPSSep.BorderSizePixel = 0
        FPSSep.Parent = Page
        
        -- T√≠tulo da se√ß√£o
        local FPSTitle = Instance.new("TextLabel")
        FPSTitle.Size = UDim2.new(1, -10, 0, 30)
        FPSTitle.BackgroundTransparency = 1
        FPSTitle.Text = "üìä FPS Viewer"
        FPSTitle.TextColor3 = Color3.fromRGB(200, 100, 255)
        FPSTitle.Font = Enum.Font.GothamBold
        FPSTitle.TextSize = 16
        FPSTitle.TextXAlignment = Enum.TextXAlignment.Left
        FPSTitle.Parent = Page
        
        -- Toggle principal
        CreateToggle(Page, "FPS Viewer", Settings.Diver.FPSViewerEnabled, function(v)
            ToggleFPSViewer(v)
        end)
        
        -- Toggle Rainbow
        CreateToggle(Page, "FPS Rainbow", Settings.Diver.FPSRainbow, function(v)
            Settings.Diver.FPSRainbow = v
        end)
        
        -- Dropdown de fontes
        CreateDropdown(Page, "FPS Font", {"GothamBold", "Code", "Arcade", "Minecraft"}, Settings.Diver.FPSFont, function(v)
            Settings.Diver.FPSFont = v
            UpdateFPSFont()
        end)
        
        -- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        -- CUSTOMIZA√á√ÉO DE CORES DO FRAME
        -- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        local ColorTitle = Instance.new("TextLabel")
        ColorTitle.Size = UDim2.new(0.6, 0, 0, 25)
        ColorTitle.BackgroundTransparency = 1
        ColorTitle.Text = "Frame Background Color"
        ColorTitle.TextColor3 = C.TXT
        ColorTitle.Font = Enum.Font.GothamBold
        ColorTitle.TextSize = 14
        ColorTitle.TextXAlignment = Enum.TextXAlignment.Left
        ColorTitle.Parent = Page
        
        -- Preview do frame (ao lado do t√≠tulo)
        local PreviewBox = Instance.new("Frame")
        PreviewBox.Size = UDim2.new(0, 80, 0, 80)
        PreviewBox.Position = UDim2.new(1, -90, 0, 0)
        PreviewBox.BackgroundColor3 = Color3.fromRGB(
            Settings.Diver.FPSFrameColor.R,
            Settings.Diver.FPSFrameColor.G,
            Settings.Diver.FPSFrameColor.B
        )
        PreviewBox.BackgroundTransparency = Settings.Diver.FPSTransparency
        PreviewBox.BorderSizePixel = 0
        PreviewBox.Parent = ColorTitle
        Corner(PreviewBox, 10)
        Stroke(PreviewBox, Color3.fromRGB(255, 255, 255), 2)
        
        local PreviewNum = Instance.new("TextLabel")
        PreviewNum.Size = UDim2.new(1, 0, 1, 0)
        PreviewNum.BackgroundTransparency = 1
        PreviewNum.Text = "60"
        PreviewNum.TextColor3 = Color3.fromRGB(0, 255, 0)
        PreviewNum.Font = Enum.Font.GothamBold
        PreviewNum.TextSize = 24
        PreviewNum.Parent = PreviewBox
        
        -- Fun√ß√£o helper para criar sliders de cor
        local function MakeColorSlider(colorName, yPos, colorRGB, initialValue)
            local SliderContainer = Instance.new("Frame")
            SliderContainer.Size = UDim2.new(1, -10, 0, 35)
            SliderContainer.BackgroundTransparency = 1
            SliderContainer.Parent = Page
            
            local ColorLabel = Instance.new("TextLabel")
            ColorLabel.Size = UDim2.new(0, 30, 0, 20)
            ColorLabel.Position = UDim2.new(0, 10, 0, 8)
            ColorLabel.BackgroundTransparency = 1
            ColorLabel.Text = colorName .. ":"
            ColorLabel.TextColor3 = colorRGB
            ColorLabel.Font = Enum.Font.GothamBold
            ColorLabel.TextSize = 14
            ColorLabel.TextXAlignment = Enum.TextXAlignment.Left
            ColorLabel.Parent = SliderContainer
            
            local SliderBG = Instance.new("Frame")
            SliderBG.Size = UDim2.new(1, -200, 0, 8)
            SliderBG.Position = UDim2.new(0, 50, 0, 14)
            SliderBG.BackgroundColor3 = C.BRD
            SliderBG.BorderSizePixel = 0
            SliderBG.Parent = SliderContainer
            Corner(SliderBG, 4)
            
            local SliderFill = Instance.new("Frame")
            SliderFill.Size = UDim2.new(initialValue / 255, 0, 1, 0)
            SliderFill.BackgroundColor3 = colorRGB
            SliderFill.BorderSizePixel = 0
            SliderFill.Parent = SliderBG
            Corner(SliderFill, 4)
            
            local SliderButton = Instance.new("TextButton")
            SliderButton.Size = UDim2.new(0, 20, 0, 20)
            SliderButton.Position = UDim2.new(initialValue / 255, -10, 0.5, -10)
            SliderButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
            SliderButton.Text = ""
            SliderButton.Parent = SliderBG
            Corner(SliderButton, 10)
            
            local ValueText = Instance.new("TextLabel")
            ValueText.Size = UDim2.new(0, 50, 0, 20)
            ValueText.Position = UDim2.new(1, -95, 0, 8)
            ValueText.BackgroundTransparency = 1
            ValueText.Text = tostring(initialValue)
            ValueText.TextColor3 = C.TXT
            ValueText.Font = Enum.Font.Gotham
            ValueText.TextSize = 12
            ValueText.Parent = SliderContainer
            
            local isDragging = false
            
            SliderButton.MouseButton1Down:Connect(function()
                isDragging = true
            end)
            
            UserInputService.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    isDragging = false
                end
            end)
            
            RunService.RenderStepped:Connect(function()
                if isDragging then
                    local mousePos = UserInputService:GetMouseLocation()
                    local relX = mousePos.X - SliderBG.AbsolutePosition.X
                    local pct = math.clamp(relX / SliderBG.AbsoluteSize.X, 0, 1)
                    local val = math.floor(255 * pct)
                    
                    SliderFill.Size = UDim2.new(pct, 0, 1, 0)
                    SliderButton.Position = UDim2.new(pct, -10, 0.5, -10)
                    ValueText.Text = tostring(val)
                    
                    -- Atualiza o valor correto
                    if colorName == "R" then
                        Settings.Diver.FPSFrameColor.R = val
                    elseif colorName == "G" then
                        Settings.Diver.FPSFrameColor.G = val
                    else
                        Settings.Diver.FPSFrameColor.B = val
                    end
                    
                    -- Atualiza preview
                    PreviewBox.BackgroundColor3 = Color3.fromRGB(
                        Settings.Diver.FPSFrameColor.R,
                        Settings.Diver.FPSFrameColor.G,
                        Settings.Diver.FPSFrameColor.B
                    )
                    
                    -- Atualiza FPS Viewer se estiver ativo
                    UpdateFPSFrameColor()
                end
            end)
        end
        
        -- Cria os 3 sliders RGB
        MakeColorSlider("R", 0, Color3.fromRGB(255, 0, 0), Settings.Diver.FPSFrameColor.R)
        MakeColorSlider("G", 35, Color3.fromRGB(0, 255, 0), Settings.Diver.FPSFrameColor.G)
        MakeColorSlider("B", 70, Color3.fromRGB(0, 0, 255), Settings.Diver.FPSFrameColor.B)
        
        -- Slider de transpar√™ncia
        CreateSlider(Page, "Frame Transparency", 0, 100, Settings.Diver.FPSTransparency * 100, function(v)
            Settings.Diver.FPSTransparency = v / 100
            PreviewBox.BackgroundTransparency = Settings.Diver.FPSTransparency
            UpdateFPSFrameColor()
        end)

        Page.Size = UDim2.new(1,0,0,L.AbsoluteContentSize.Y)
        UpdateScrollCanvasSize(Content)
    end)
    
    local ColorsBtn = CreateCategory("Colors","üé®")
    ColorsBtn.MouseButton1Click:Connect(function()
        Content.Visible = true
        for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
        local Page = Instance.new("Frame") Page.Size = UDim2.new(1,0,0,0) Page.BackgroundTransparency = 1 Page.Parent = Content
        local L = Instance.new("UIListLayout") L.Padding = UDim.new(0,15) L.Parent = Page
        local P = Instance.new("UIPadding") P.PaddingTop,P.PaddingLeft = UDim.new(0,10),UDim.new(0,10) P.Parent = Page
        CreateRGBSlider(Page,"FOV Color",Settings.Colors.FOV,function(c) Settings.Colors.FOV=c if FOVCircle and not c.Chroma then FOVCircle.Color=Color3.new(c.R/255,c.G/255,c.B/255) end end)
        CreateRGBSlider(Page,"Aimbot Color",Settings.Colors.Aimbot,function(c) Settings.Colors.Aimbot=c end)
        CreateRGBSlider(Page,"ESP Color",Settings.Colors.ESP,function(c) Settings.Colors.ESP=c end)
        CreateRGBSlider(Page,"Panel Color",Settings.Colors.Panel,function(c) Settings.Colors.Panel=c UpdateAllGradients() end)
        CreateRGBSlider(Page,"Border Color",Settings.Colors.Border,function(c) Settings.Colors.Border=c UpdateAllBorderGradients() end)
        Page.Size = UDim2.new(1,0,0,L.AbsoluteContentSize.Y)
        UpdateScrollCanvasSize(Content)
    end)
    
    local ConfigBtn = CreateCategory("Config","‚öô")
    ConfigBtn.MouseButton1Click:Connect(function()
        Content.Visible = true
        for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
        local Page = Instance.new("Frame") Page.Size = UDim2.new(1,0,0,0) Page.BackgroundTransparency = 1 Page.Parent = Content
        local L = Instance.new("UIListLayout") L.Padding = UDim.new(0,10) L.Parent = Page
        local P = Instance.new("UIPadding") P.PaddingTop,P.PaddingLeft = UDim.new(0,10),UDim.new(0,10) P.Parent = Page
        CreateDropdown(Page,"Theme",{"Dark","Light"},Settings.Theme,function(v) 
            Settings.Theme = v 
            C = v=="Dark" and Dark or Light 
            MainFrame.BackgroundColor3 = C.BG 
            Title.BackgroundColor3 = C.SEC 
            Sidebar.BackgroundColor3 = C.SEC 
            Content.BackgroundColor3 = C.BG
            -- Atualiza cores de texto
            for _,obj in pairs(MainFrame:GetDescendants()) do
                if obj:IsA("TextLabel") or obj:IsA("TextButton") then
                    if obj.Name ~= "Preview" and obj.Text ~= "PREVIEW" then
                        obj.TextColor3 = C.TXT
                    end
                end
            end
        end)
        CreateToggle(Page,"Remove Fog",Settings.Config.RemoveFog,function(v) Settings.Config.RemoveFog=v ToggleRemoveFog(v) end)
        CreateToggle(Page,"Full Bright",Settings.Config.FullBright,function(v) Settings.Config.FullBright=v ToggleFullBright(v) end)
        Page.Size = UDim2.new(1,0,0,L.AbsoluteContentSize.Y)
        UpdateScrollCanvasSize(Content)
    end)
    
    local ThumbBtn = CreateCategory("Thumb","üë§")
    ThumbBtn.MouseButton1Click:Connect(function()
        Content.Visible = true
        for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
        local Page = Instance.new("Frame") Page.Size = UDim2.new(1,0,0,300) Page.BackgroundTransparency = 1 Page.Parent = Content
        local Thumb = Instance.new("ImageLabel") Thumb.Size = UDim2.new(0,150,0,150) Thumb.Position = UDim2.new(0.5,-75,0,20) Thumb.BackgroundTransparency = 1 Thumb.Image = "https://www.roblox.com/headshot-thumbnail/image?userId="..LocalPlayer.UserId.."&width=150&height=150&format=png" Thumb.Parent = Page Corner(Thumb,75) Stroke(Thumb,C.ACC,3)
        local User = Instance.new("TextLabel") User.Size = UDim2.new(1,0,0,30) User.Position = UDim2.new(0,0,0,180) User.BackgroundTransparency = 1 User.Text = LocalPlayer.Name User.TextColor3 = C.TXT User.Font = Enum.Font.GothamBold User.TextSize = 18 User.Parent = Page
        local Disp = Instance.new("TextLabel") Disp.Size = UDim2.new(1,0,0,20) Disp.Position = UDim2.new(0,0,0,210) Disp.BackgroundTransparency = 1 Disp.Text = "@"..LocalPlayer.DisplayName Disp.TextColor3 = C.ACC Disp.Font = Enum.Font.Gotham Disp.TextSize = 14 Disp.Parent = Page
        Content.CanvasSize = UDim2.new(0,0,0,300)
    end)
    
    MinBtn.MouseButton1Click:Connect(function() if MainFrame.Size.Y.Offset > 70 then Tween(MainFrame,{Size=UDim2.new(0,700,0,60)},0.3) else Tween(MainFrame,{Size=UDim2.new(0,700,0,500)},0.3) end end)
    CloseBtn.MouseButton1Click:Connect(function() PanelVisible = false Tween(MainFrame,{Position=UDim2.new(0.5,-350,-1,0)},0.5) task.wait(0.5) MainFrame.Visible = false end)
    
    local drag,dragStart,startPos
    Title.InputBegan:Connect(function(inp) if inp.UserInputType==Enum.UserInputType.MouseButton1 then drag=true dragStart=inp.Position startPos=MainFrame.Position end end)
    UserInputService.InputEnded:Connect(function(inp) if inp.UserInputType==Enum.UserInputType.MouseButton1 then drag=false end end)
    UserInputService.InputChanged:Connect(function(inp) if drag and inp.UserInputType==Enum.UserInputType.MouseMovement then local delta = inp.Position - dragStart MainFrame.Position = UDim2.new(startPos.X.Scale,startPos.X.Offset+delta.X,startPos.Y.Scale,startPos.Y.Offset+delta.Y) end end)
    
    SG.Parent = LocalPlayer:WaitForChild("PlayerGui")
    MainFrame.Position = UDim2.new(0.5,-350,-1,0)
    Tween(MainFrame,{Position=UDim2.new(0.5,-350,0.5,-250)},0.5)
    
    -- ABRE A ABA MAIN AUTOMATICAMENTE
    task.wait(0.6)
    Content.Visible = true
    for _,c in pairs(Content:GetChildren()) do if c:IsA("Frame") then c:Destroy() end end
    local Page = Instance.new("Frame") Page.Size = UDim2.new(1,0,0,0) Page.BackgroundTransparency = 1 Page.Parent = Content
    local L = Instance.new("UIListLayout") L.Padding = UDim.new(0,10) L.Parent = Page
    local P = Instance.new("UIPadding") P.PaddingTop,P.PaddingLeft = UDim.new(0,10),UDim.new(0,10) P.Parent = Page
    CreateToggle(Page,"Aimbot Head",Settings.Main.AimbotHead,function(v) Settings.Main.AimbotHead=v end)
    CreateToggle(Page,"Aimbot Safe",Settings.Main.AimbotSafe,function(v) Settings.Main.AimbotSafe=v end)
    CreateToggle(Page,"Shoot Nearest",Settings.Main.ShootNearest,function(v) Settings.Main.ShootNearest=v end)
    CreateDropdown(Page,"Aimbot Target",{"Head","HumanoidRootPart"},Settings.Main.AimbotTarget,function(v) Settings.Main.AimbotTarget=v end)
    CreateToggle(Page,"FOV",Settings.Main.FOV,function(v) Settings.Main.FOV=v if FOVCircle then FOVCircle.Visible=v end end)
    CreateSlider(Page,"FOV Size",50,500,Settings.Main.FOVSize,function(v) Settings.Main.FOVSize=v end)

    -- NOVO: Dropdown tipo de aimbot (na abertura)
    CreateDropdown(Page,"Tipo de Aimbot",{"Ao Mirar","Toogle Key"},Settings.Main.AimbotType,function(v) 
        Settings.Main.AimbotType=v 
        print("üéØ Aimbot mudado para: " .. v)
    end)

    -- NOVO: Keybind do aimbot (na abertura)
    CreateKeybind(Page,"Aimbot Toogle Key",Settings.Main.AimbotKey or Enum.KeyCode.E,function(keyCode, inputType)
        if inputType == Enum.UserInputType.MouseButton1 or inputType == Enum.UserInputType.MouseButton2 then
            Settings.Main.AimbotMouseButton = inputType
            Settings.Main.AimbotKey = nil
            print("üéØ Aimbot: " .. (inputType == Enum.UserInputType.MouseButton1 and "MB1" or "MB2"))
        else
            Settings.Main.AimbotKey = keyCode
            Settings.Main.AimbotMouseButton = nil
            if keyCode and keyCode.Name then
                print("üéØ Aimbot Key: " .. keyCode.Name)
            end
        end
    end)

    CreateToggle(Page,"Hitbox Expander",Settings.Main.HitboxEnabled,function(v) Settings.Main.HitboxEnabled=v ApplyHitbox() end)
    CreateSlider(Page,"Hitbox",5,50,Settings.Main.HitboxSize,function(v) Settings.Main.HitboxSize=v ApplyHitbox() end)
    CreateDropdown(Page,"Hitbox Shape",{"Box","Circle"},Settings.Main.HitboxShape,function(v) Settings.Main.HitboxShape=v ApplyHitbox() end)
    CreateDropdown(Page,"Hitbox Part",{"HumanoidRootPart","Head"},Settings.Main.HitboxPart,function(v) Settings.Main.HitboxPart=v ApplyHitbox() end)
    CreateToggle(Page,"No Recoil",Settings.Main.NoRecoil,function(v) Settings.Main.NoRecoil=v end,true)
    CreateToggle(Page,"Inf. Munition",Settings.Main.InfMunition,function(v) Settings.Main.InfMunition=v end,true)

    -- NOVO: Follow Player (na abertura)
    CreateToggle(Page,"Follow Player (Acima)",Settings.Main.FollowPlayer,function(v) 
        Settings.Main.FollowPlayer=v 
        ToggleFollowPlayer(v) 
    end)
    CreateSlider(Page,"Follow Height",5,30,Settings.Main.FollowDistance,function(v) 
        Settings.Main.FollowDistance=v 
    end)

    Page.Size = UDim2.new(1,0,0,L.AbsoluteContentSize.Y)
    UpdateScrollCanvasSize(Content)
    
    print("üü£ ULTRA BLOOD - UI COMPLETA COM ABA MAIN ABERTA!")
end

-- SHIFT+Z TOGGLE GLOBAL (funciona minimizado ou fechado) + Aimbot Toogle listener
UserInputService.InputBegan:Connect(function(inp,gpe)
    if gpe then return end
    if inp.UserInputType == Enum.UserInputType.Keyboard then
        if inp.KeyCode == Enum.KeyCode.Z and UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then
            if PanelVisible then
                PanelVisible = false
                Tween(MainFrame,{Position=UDim2.new(0.5,-350,-1,0)},0.5)
                task.wait(0.5)
                MainFrame.Visible = false
                print("üü£ Panel fechado! (SHIFT+Z para reabrir)")
            else
                PanelVisible = true
                MainFrame.Visible = true
                MainFrame.Size = UDim2.new(0,700,0,500)
                MainFrame.Position = UDim2.new(0.5,-350,-1,0)
                Tween(MainFrame,{Position=UDim2.new(0.5,-350,0.5,-250)},0.5)
                print("üü£ Panel aberto!")
            end
        -- ‚úÖ NOVO: Aimbot Toogle Key
        elseif Settings.Main.AimbotType == "Toogle Key" then
            if Settings.Main.AimbotKey and inp.KeyCode == Settings.Main.AimbotKey then
                AimbotActive = not AimbotActive
                print("üéØ Aimbot: " .. (AimbotActive and "ON" or "OFF"))
            elseif inp.KeyCode == DashKey then
                Dash()
            end
        elseif inp.KeyCode == DashKey then
            Dash()
        end
    -- ‚úÖ NOVO: Mouse Button Aimbot
    elseif inp.UserInputType == Enum.UserInputType.MouseButton1 or inp.UserInputType == Enum.UserInputType.MouseButton2 then
        if Settings.Main.AimbotType == "Toogle Key" and Settings.Main.AimbotMouseButton == inp.UserInputType then
            AimbotActive = not AimbotActive
            print("üéØ Aimbot: " .. (AimbotActive and "ON" or "OFF"))
        end
    end
end)

-- APLICA ESP/HITBOX EM PLAYERS EXISTENTES E NOVOS
for _,p in pairs(Players:GetPlayers()) do 
    if p~=LocalPlayer then 
        CreateESP(p)
        ApplyHitboxToPlayer(p)
    end
end

Players.PlayerAdded:Connect(function(p)
    CreateESP(p)
    p.CharacterAdded:Connect(function()
        task.wait(0.5)
        ApplyHitboxToPlayer(p)
    end)
end)

Players.PlayerRemoving:Connect(function(p)
    if ESPObjects[p] then
        for _,obj in pairs(ESPObjects[p]) do
            if typeof(obj)=="Instance" then obj:Destroy()
            elseif typeof(obj)=="table" and obj.Remove then obj:Remove() end
        end
        ESPObjects[p]=nil
    end
end)

RunService.Heartbeat:Connect(function() UpdateAimbot() ShootNearest() ApplyHitbox() ApplyNoRecoil() ApplyInfAmmo() if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then LocalPlayer.Character.Humanoid.WalkSpeed = Settings.Diver.Speed LocalPlayer.Character.Humanoid.JumpPower = Settings.Diver.JumpPower end ApplyKA() end)
RunService.RenderStepped:Connect(function() if FOVCircle then FOVCircle.Visible = Settings.Main.FOV FOVCircle.Radius = Settings.Main.FOVSize FOVCircle.Position = Vector2.new(Mouse.X, Mouse.Y + 36) end UpdateFly() end)

DetectGame()
   task.wait(0.5)
CreateUI()

print([[
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë  üü£ PANEL Ultra Blood - MEGA UPDATE üü£  ‚ïë
‚ï†‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï£
‚ïë  ‚úÖ KEYBINDS em TODAS as op√ß√µes!        ‚ïë
‚ïë  ‚úÖ Auto Dodge (teleporta de inimigos)  ‚ïë
‚ïë  ‚úÖ TP Players (follow + auto switch)   ‚ïë
‚ïë  ‚úÖ Remove Fog + FullBright             ‚ïë
‚ïë  ‚úÖ ShootNearest SEM focar (raycast)    ‚ïë
‚ïë  ‚úÖ ESP Chroma funcionando              ‚ïë
‚ïë  ‚úÖ Chroma em TUDO (padr√£o)             ‚ïë
‚ïë  ‚úÖ Dark Mode padr√£o                    ‚ïë
‚ïë  ‚úÖ Hacker Skin RGB                     ‚ïë
‚ïë  ‚úÖ God Mode + Kill/TP/Bring FIXADOS    ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
]])
